<header> Pomoč MON o definicijah storitev </header><p> To je druga in zadnja stopnja za konfiguracijo MON. <p> Privzete vrednosti so prikazane za obvezne storitve <marked in RED color> . Oglejte si ustrezno temo pomoči spodaj za več pomoči o definicijah storitev. <p> Za <b>&quot;mail.alert&quot;</b> poskrbite, da je sendmail konfiguriran in da se v hostmachine zažene deamon <b>&quot;sendmail&quot;</b> . <H3> Opredelitve storitev </H3><P><DL COMPACT><DT> <B>storitev</b> <I>imestoritve</i> <DD> Opredelitev storitve se začne s <B>servisom</b> ključnih besed, ki mu sledi beseda, ki je oznaka za to storitev. <P> Sestavni deli storitve so interval, nadzor in ena ali več definicij časovnega obdobja, kot je opredeljeno spodaj. <P> Če je ime storitve &quot;privzeto&quot; določeno znotraj skupine gledalcev, imenovane &quot;dafault&quot; (glejte zgoraj), bo privzeta / privzeta definicija uporabljena za ravnanje z neznanimi mon pasti. <P><DT> <B>interval</b> <I>timeval</i> <DD> <B>Interval</b> ključnih besed, ki mu sledi časovna vrednost, določa pogostost sproženja skripta monitorja. Časovne vrednosti so opredeljene kot &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot; ali &quot;1d&quot;, kar pomeni 30 sekund, 5 minut, 1 uro ali 1 dan. Številčni del je lahko ulomek, kot je &quot;1,5h&quot; ali uro in pol. Ta oblika časovne specifikacije bo imenovana <I>časovna omejitev</i> . <P><DT> <B>traptimeout</b> <I>timeval</i> <DD> Ta ključna beseda ima isto časovno specifikacijo argument kot <B><I>interval,</i></b> in omogoča storitev pričakujejo past iz zunanjega vira vsaj, da pogosto, sicer bo registriran neuspeh. To se uporablja za storitev srčnega utripa. <P><DT> <B>trapduracijski</b> <I>timeval</i> <DD> Če dobite past, stanje storitve, v katero je bila past dostavljena, običajno ostane nespremenjeno. Če je podana <B>past</b> , bo status storitve ostal v stanju napake v času, ki ga določa <I>časovni interval</i> , nato pa bo ponastavljen na &quot;uspeh&quot;. <P><DT> <B>randskew</b> <I>timeval</i> <DD> Namesto da načrtujete, da se bo skript monitorja izvajal na začetku vsakega intervala, naključno prilagodite interval, določen s parametrom <B>intervala,</b> s <B>preskusno vrstico</b> plus ali minus <B>.</b> Vrednost naklona je podana kot parameter <B>intervala</b> : &quot;30s&quot;, &quot;5m&quot; itd. Na primer, če je <B>interval</b> 1m in je <B>randskew</b> &quot;5s&quot;, <I>mon</i> bo <B>začrtal</b> skript monitorja na čas med vsakih 55 sekund in 65 sekund Namen je pomagati pri razporeditvi bremena na strežniku, kadar je veliko storitev načrtovano v istih intervalih. <P><DT> <B>monitor</b> <I>monitor-name [arg ...]</i> <DD> <B>Monitor</b> ključnih besed, ki mu sledi ime scenarij in argumente določa monitor teči ob izteku časa. Če določite argumente, ki jih želite poslati skriptu monitorja, se upoštevajo konvencionalne določbe za navajanje lupin. Skript se prikliče iz imenika, podanega z argumentom <B>-s</b> , vse naslednje besede pa so kot argumenti posredovane monitorju, ki mu sledi seznam gostiteljev v skupini, na katere se sklicuje trenutna skupina gledalcev. Če se vrstica zaslona konča z &quot;;&quot; kot ločena beseda gostiteljske skupine pri priklicu programa niso dodane na seznam argumentov. <P><DT> <B>dovoli_emprazno_skupino</b> <DD> Možnost <B>enable_empty_group</b> bo omogočila <B>priklic</b> monitorja, tudi če je gostiteljska skupina za to uro prazna zaradi onemogočenih gostiteljev. Privzeto vedenje se ne prikliče na monitor, ko so vsi gostitelji v skupini gostiteljev onemogočeni. <P><DT> <B>opis</b> <I>opis besedila</i> <DD> Naslednji <B>opis</b> besedila poizvedujejo programi stranke, posredujejo jih opozorilom in monitorjem prek spremenljivke okolja. Vsebovati mora kratek opis storitve, ki je primeren za vključitev v e-pošto ali na spletno stran. <P><DT> <B>Izključi</b> <I>gostitelja [gostitelja ...]</i> <DD> Vsak gostitelj, naveden po <B>izključitvi_hostov,</b> bo izključen iz preverjanja storitev. <P><DT> <B>izključi_period</b> <I>obdobja</i> <DD> Ne zaženite načrtovanega monitorja v času, ki ga <I>določa periodpec</i> . <P><DT> <B>odvisni od</b> <I>ekspresije</i> <DD> So <B>odvisne od</b> ključnih besed se uporablja za določitev izraza odvisnosti, ki oceni, da bodisi velja za napačne, v boolean smislu. Odvisnosti so dejanski izrazi Perl in morajo upoštevati vsa skladenjska pravila. Izrazi so ovrednoteni v njihovem lastnem prostoru paketa, da slučajno ne bi prišlo do kakšnih neželenih stranskih učinkov. Če se pri ocenjevanju izraza najde napaka skladnje, se zabeleži prek syslog-a. <P> Pred oceno se pojavijo naslednje zamenjave izraza: stavki, ki so videti kot &quot;skupina: storitev&quot;, so nadomeščeni z vrednostjo trenutnega operativnega stanja navedene določene storitve. Te nadomestke opstatusa izračunamo rekurzivno, torej če je storitev A odvisna od storitve B in storitev B odvisna od storitve C, potem je storitev A odvisna od storitve C. Uspešna obratovalna stanja (ki ocenjujejo na &quot;1&quot;) sta &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;in&quot; STAT_UNKNOWN &quot;. Za skupino se lahko uporablja beseda &quot;SAMO&quot; (z vsemi začetnicami) (npr. &quot;SAMO: storitev&quot;) in je okrajšava za trenutno skupino gledanja. <P> Ta funkcija se lahko uporablja za nadzor opozoril za storitve, ki so odvisne od drugih storitev, npr. Preizkus SMTP, ki je odvisen od dosega pinga. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Ocenjevanje grafov odvisnosti lahko nadzoruje zatiranje bodisi opozorilnih ali nadzornih priklic. <P> <B>Zatiranje opozoril</b> . Če je ta možnost nastavljena na &quot;a&quot;, se izraz odvisnosti oceni po izhodu monitorja za storitev ali po sprejemu pasti. Opozorilo bo poslano le, če je ocena uspešna, kar pomeni, da nobeno vozlišče v grafu odvisnosti ne kaže na neuspeh. <P> <B>Spremljanje zatiranja</b> . Če je nastavljeno na &quot;m&quot;, bo izraz odvisnosti izhlapel, preden se bo monitor za storitev začel izvajati. Če izhlapevanje uspe, se bo monitor zagnal. V nasprotnem primeru se monitor ne bo izvajal in status storitve bo ostal enak. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Opredelitve obdobja </H3><P> Obdobja se uporabljajo za določitev pogojev, ki naj omogočajo oddajo razpisov ukrepov. <P><DL COMPACT><DT> <B>obdobje</b> <I>[oznaka:] periodpec</i> <DD> Obdobje združuje enega ali več alarmov in spremenljivk, ki nadzorujejo, kako pogosto se opozorilo zgodi, ko pride do okvare. Ključna beseda <B>obdobje</b> ima dve obliki. Prvi vzame argument, ki je specifikacija obdobja iz modula Patrick Ryan&#39;s Time: Period Perl 5. Za več informacij glejte &quot;Perldoc Time :: Period&quot;. <P> Drugi obrazec zahteva nalepko, ki ji sledi specifikacija obdobja, kot je opredeljeno zgoraj. Oznaka je oznaka, sestavljena iz abecednega znaka ali podčrtaja, ki ji sledi nič ali več alfanumerik ali podčrtajev in se konča z dvopičjem. Ta obrazec omogoča več obdobij z isto definicijo obdobja. Ena uporaba je, da ima opredelitev obdobja, ki je ne <B>alertafter</b> ali <B>alertevery</b> parametre za določeno časovno obdobje, in drugega za isto časovno obdobje z drugačnim sklopom razpisov ukrepov, ki ne vsebujejo teh parametrov. <P><DT> <B>timeval</b> <I>alarm</i> <DD> <B>Ključna</b> beseda <B>opozorila</b> (v definiciji <B>obdobja</b> ) ima isto vrsto argumenta kot spremenljivka <B>intervala</b> in omeji število <B>oddaj</b> opozorila, ko storitev še naprej deluje neuspešno. Na primer, če je interval &quot;1h&quot;, se bodo samo opozorila v odseku obdobja sprožila le enkrat na uro. Če v <B>besedilu</b> obdobja izpustite ključno besedo opozorila, se bo opozorilo poslalo vsakič, ko je odkrita napaka. Če se rezultat dveh zaporednih okvar privzeto spremeni, potem se razveljavi interval alarmov. Če je beseda &quot;povzetek&quot; zadnji argument, bodo pri primerjavi izhodov zaporednih okvar upoštevane samo povzete vrstice povzetka. <P><DT> <B>opozorilni</b> <I>št</i> <DD><P><DT> <B>alarmafter</b> <I>num timeval</i> <DD> <B>Ključna</b> beseda <B>opozoril</b> (v odseku <B>obdobja</b> ) ima dve obliki: samo z argumentom &quot;num&quot; ali z argumenti &quot;num timeval&quot;. V prvem obrazcu se bo opozorilo sprožilo šele po zaporednih napakah &quot;num&quot;. <P> V drugi obliki trditve so pozitivno celo število, ki ji sledi interval, ki ga je <B>intervalne</b> spremenljivke zgoraj opisano. Če so navedeni parametri, bodo opozorila za to obdobje poklicana šele, ko se v tem intervalu zgodi veliko okvar. Na primer, če je <B>opozoritelju</b> naveden argument &quot;3 30m&quot;, se opozorilo pokliče, če se v 30 minutah zgodijo 3 napake. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Ta spremenljivka sporoči strežniku, da med odpovedjo pokliče največ <I>števila</i> opozoril. Števec opozoril se sproti hrani in se ponastavi ob vsakem uspehu. <P><DT> <B>comp_alerts</b> <DD><P> Če je podana ta možnost, se upalerts pokličejo le, če je bil klican ustrezen opozorilo &quot;navzdol&quot;. <P><DT> <B>opozorilo</b> <I>opozorila [arg ...]</i> <DD> Obdobje lahko vsebuje več opozoril, ki se sprožijo ob neuspehu storitve. Opozorilo je določeno s ključno besedo <B>opozorila</b> , ki mu sledi izbirni parmeter za <B>izhod</b> in argumenti, ki se razlagajo enako kot definicija <B>monitorja</b> , vendar brez znaka &quot;;&quot; izjema. <B>Izhodni</b> parameter ima obliko <B>izhod = x</b> ali <B>izhod = xy</b> in povzroči, da se opozorilo pokliče le, če izhodno stanje skripta monitorja spada v območje <B>izhodnega</b> parametra. Če je, na primer, vrstica opozorilo je <I>opozorilo za izhod = 10-20 mail.alert mis</i> nato pa bo <I>po pošti opozorilo</i> mogoče sklicevati samo z <I>mis</i> kot njenih trditev, če je izstopna vrednost tega programa monitorja med 10. in 20. Ta funkcija vam omogoča, da sprožilec različna opozorila z različnimi stopnjami resnosti (na primer, ko je prostora na disku od 8% do 3%). <P> Glejte zgornji razdelek <B>ALERT PROGRAMS</b> za seznam pramaterjev, ki jih bo samodejno poslal v programe opozarjanja. <P><DT> <I>opozorilo</i> <B>upalert</b> <I>[arg ...]</i> <DD> <B>Upalert</b> je pohvalo <B>opozorila</b> . Upalert se pokliče, ko neke storitve preidejo iz stanja stanja v neuspeh. Skript <B>upalert</b> se imenuje z enakimi parametri kot skript <B>opozorila</b> , z dodatkom parametra <B>-u,</b> ki se preprosto uporablja za sporočanje skripta opozorila, da ga kliče kot upalert. Za vsako definicijo obdobja je lahko določeno več upalerjev. Upoštevajte, da je privzeto vedenje, da bo upalert poslan ne glede na to, ali so bila poslana predhodna opozorila &quot;navzdol&quot;, saj se pri prehodu stanja sprožijo upalerti. Nastavite možnost <B>comp_alerts</b> za obdobje, da <B>upalerte</b> seznanite z opozorili &quot;navzdol&quot;. <P><DT> <I>opozorilo o</i> <B>startupalertu</b> <I>[arg ...]</i> <DD> <B>Startupalert</b> se pokliče šele, ko se <B>mon</b> strežnik začne izvajati. <P><DT> <B>upalertafter</b> <I>timeval</i> <DD> Parameter <B>upalertafter</b> je določen kot niz, ki sledi sintaksi parametra <B>intervala</b> (&quot;30s&quot;, &quot;1m&quot; itd.) In nadzoruje sprožitev <B>upalert</b> . Če se storitev vrne nazaj po tem, ko je bila <B>prekinjena</b> za čas, ki je večji ali enak vrednosti te možnosti, se <B>pokliče upalert</b> . To možnost uporabite, da preprečite klicanje upalertov zaradi &quot;utrinkov&quot; (kratkih izpadov). <P>