<header> MON palīdzība pakalpojumu definīcijās </header><p> Šis ir otrais un pēdējais MON konfigurācijas posms. <p> Obligātajiem pakalpojumiem tiek parādītas noklusējuma vērtības <marked in RED color> . Lai iegūtu papildinformāciju par pakalpojumu definīcijām, skatiet atbilstošo palīdzības tēmu zemāk. <p> Attiecībā uz <b>&quot;mail.alert&quot;</b> pārliecinieties, vai sendmail ir konfigurēts un resursdatorā ir sākts <b>&quot;sendmail&quot;</b> deamon. <H3> Pakalpojumu definīcijas </H3><P><DL COMPACT><DT> <B>pakalpojuma</b> <I>SERVICENAME</i> <DD> Pakalpojuma definīcija sākas ar atslēgvārdu <B>service,</b> kam seko vārds, kas ir šī pakalpojuma tags. <P> Pakalpojuma sastāvdaļas ir intervāls, monitors un viena vai vairākas laika perioda definīcijas, kā noteikts turpmāk. <P> Ja pakalpojuma nosaukums “noklusējums” ir definēts novērošanas grupā ar nosaukumu “dafault” (skat. Iepriekš), tad, apstrādājot nezināmus monu slazdus, tiks izmantota noklusējuma / noklusējuma definīcija. <P><DT> <B>intervāls</b> <I>timeval</i> <DD> Atslēgvārda <B>intervāls,</b> kam seko laika vērtība, norāda monitora skripta palaišanas biežumu. Laika vērtības tiek definētas kā &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot; vai &quot;1d&quot;, kas nozīmē 30 sekundes, 5 minūtes, 1 stundu vai 1 dienu. Skaitliskā daļa var būt frakcija, piemēram, “1,5h” vai pusotra stunda. Šis laika specifikācijas formāts tiks saukts par laika <I>periodu</i> . <P><DT> <B>traptimeout laika</b> <I>periods</i> <DD> Šis atslēgvārds ir tāds pats laika specifikācijas argumentu kā <B><I>intervāls,</i></b> un padara pakalpojumu sagaidīt lamatās no ārēja avota, vismaz, ka bieži vien, cits neveiksme tiks reģistrēts. To izmanto sirdsdarbības stila pakalpojumam. <P><DT> <B>trapduration laika</b> <I>periods</i> <DD> Ja tiek saņemts slazds, pakalpojuma statuss, kuram slazds tika piegādāts, parasti paliek nemainīgs. Ja tiek norādīta <B>trapduration</b> , pakalpojuma statuss paliks neveiksmīgā stāvoklī uz laika <I>intervālu</i> norādīto <I>laiku</i> , un pēc tam tas tiks atiestatīts uz &quot;panākumi&quot;. <P><DT> <B>randskew laika</b> <I>periods</i> <DD> Tā vietā, lai ieplānotu monitora skriptu darboties katra intervāla sākumā, nejauši pielāgojiet <B>intervāla</b> parametru norādīto <B>intervālu</b> ar plus vai mīnus <B>randskew.</b> Sašķiebuma vērtība tiek norādīta kā <B>intervāla</b> parametrs: &quot;30 s&quot;, &quot;5 m&quot; utt. Piemēram, ja <B>intervāls</b> ir 1 m, bet <B>randskew</b> ir &quot;5 s&quot;, tad <I>mon</i> ieplāno monitora skriptu kādu laiku no katrām 55 sekundēm līdz 65 sekundes. Mērķis ir palīdzēt sadalīt slodzi uz servera, kad daudzi pakalpojumi tiek plānoti ar vienādiem laika intervāliem. <P><DT> <B>monitora</b> <I>monitora nosaukums [arg ...]</i> <DD> Atslēgvārds <B>monitors,</b> kam seko skripta nosaukums un argumenti, norāda monitoru darbināt, kad beidzas taimera derīguma termiņš. Norādot argumentus, kas jānosūta monitora skriptam, tiek ievēroti apvalkam līdzīgi kotēšanas principi. Skripts tiek izsaukts no direktorija, kas pievienots ar argumentu <B>-s</b> , un visi sekojošie vārdi tiek piegādāti kā argumenti monitora programmai, kurai seko grupas saimnieku saraksts, uz kuru atsaucas pašreizējā novērošanas grupa. Ja monitora līnija beidzas ar burtu &quot;;;&quot; kā atsevišķs vārds resursdatora grupas netiek pievienotas argumentu sarakstam, kad tiek izsaukta programma. <P><DT> <B>atļaut_izmēra_grupa</b> <DD> <B>Opcija allow_empty_group</b> ļaus <B>izsaukt</b> monitoru pat tad, ja šī pulksteņa resursgrupa ir tukša, jo ir atspējoti resursdatori. Noklusējuma rīcība nav izsaukt monitoru, kad visi resursdatoru grupas resursdatori ir atspējoti. <P><DT> <B>apraksts</b> <I>apraksta teksts</i> <DD> Tekstu, kas seko šim <B>aprakstam,</b> vaicā klienta programmas, tas tiek nodots brīdinājumiem un monitoriem, izmantojot vides mainīgo. Tajā jāietver īss pakalpojuma apraksts, kas ir piemērots iekļaušanai e-pastā vai tīmekļa lapā. <P><DT> <B>exit_hosts</b> <I>host [host ...]</i> <DD> Visi resursdatori, kas uzskaitīti pēc <B>izslēgšanas_hosts,</b> tiks izslēgti no pakalpojuma pārbaudes. <P><DT> <B>izslēgt_periodu</b> <I>periodus</i> <DD> Nedarbiniet ieplānoto monitoru laikā, kuru nosaka <I>periodpec</i> . <P><DT> <B>atkarīga no</b> <I>dependekspresijas</i> <DD> <B>Atkarīgais</b> atslēgvārds tiek izmantots, lai norādītu atkarības izteiksmi, kas Būla nozīmē tiek vērtēta kā patiesa vai nepatiesa. Atkarības ir faktiskas Perlas izteiksmes, un tām ir jāievēro visi sintaktiskie noteikumi. Izteicieni tiek novērtēti katra paša iesaiņojuma vietā, lai nejauši neradītu nevēlamu blakus efektu. Ja, novērtējot izteiksmi, tiek atrasta sintakses kļūda, tā tiek reģistrēta, izmantojot syslog. <P> Pirms novērtēšanas notiek šādas izteiksmes aizstāšanas: frāzes, kas izskatās kā “grupa: pakalpojums”, tiek aizstātas ar šī noteiktā pakalpojuma pašreizējā darbības stāvokļa vērtību. Šīs optāta aizstāšanas tiek aprēķinātas rekursīvi, tāpēc, ja pakalpojums A ir atkarīgs no pakalpojuma B, bet pakalpojums B ir atkarīgs no pakalpojuma C, tad pakalpojums A ir atkarīgs no pakalpojuma C. Veiksmīgi darbības statusi (kas novērtē uz &quot;1&quot;) ir &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;un&quot; STAT_UNKNOWN &quot;. Vārdu &quot;SELF&quot; (ar visiem burtiem) var izmantot grupai (piemēram, &quot;SELF: service&quot;), un tas ir pašreizējās sardzes grupas saīsinājums. <P> Šo funkciju var izmantot, lai kontrolētu brīdinājumus par pakalpojumiem, kuri ir atkarīgi no citiem pakalpojumiem, piemēram, SMTP pārbaude, kas ir atkarīga no tā, vai mašīna ir sasniedzama. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Atkarības diagrammu novērtēšana var kontrolēt trauksmes vai monitoru izsaukumu nomākšanu. <P> <B>Trauksmes slāpēšana</b> . Ja šī opcija ir iestatīta uz &quot;a&quot;, tad atkarības izteiksme tiks novērtēta pēc pakalpojuma monitora aiziešanas vai pēc slazda saņemšanas. Brīdinājums tiks nosūtīts tikai tad, ja novērtēšana būs veiksmīga, kas nozīmē, ka neviens no atkarības diagrammas mezgliem nenorāda uz kļūmi. <P> <B>Monitoru nomākums</b> . Ja tas ir iestatīts uz &quot;m&quot;, tad atkarības izteiksme tiks iztvaicēta, pirms pakalpojuma monitors sāks darboties. Ja iztvaikošana izdodas, monitors tiks palaists. Pretējā gadījumā monitors netiks palaists, un pakalpojuma statuss paliks tāds pats. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Perioda definīcijas </H3><P> Periodus izmanto, lai definētu nosacījumus, kuriem būtu jāļauj iesniegt brīdinājumus. <P><DL COMPACT><DT> <B>period</b> <I>[etiķete:] periodpecpec</i> <DD> Periods grupē vienu vai vairākas trauksmes un mainīgos lielumus, kas kontrolē, cik bieži trauksme notiek, ja notiek kļūme. <B>Perioda</b> atslēgvārdam ir divas formas. Pirmais ņem argumentu, kas ir perioda specifikācija no Patrika Raiena laika: Periods Perl 5 moduļa. Plašāku informāciju skatiet sadaļā &quot;perldoc laiks :: Periods&quot;. <P> Otrajai formai nepieciešama etiķete, kurai seko perioda specifikācija, kā noteikts iepriekš. Etiķete ir etiķete, kas sastāv no alfabēta burta vai pasvītrojuma, kam seko nulle vai vairāk burtciparu vai pasvītrojumu un beidzas ar kolu. Šī forma ļauj vairākus periodus ar vienu un to pašu perioda definīciju. Viens pielietojums ir tāda perioda definīcija, kurā nav <B>brīdinājuma</b> vai <B>brīdinājuma</b> parametru noteiktā laika posmā, bet citā - tajā pašā laika posmā ar atšķirīgu brīdinājumu komplektu, kas satur šos parametrus. <P><DT> <B>brīdinājuma</b> <I>termiņš</i> <DD> <B>Brīdinājuma sniegšanas</b> atslēgvārds ( <B>perioda</b> definīcijā) ņem tāda paša veida argumentus kā <B>intervāla</b> mainīgais un ierobežo to, cik reizes brīdinājums tiek nosūtīts, kad pakalpojums turpina neizdoties. Piemēram, ja intervāls ir “1h”, tad tikai brīdinājumi perioda sadaļā tiks aktivizēti tikai reizi stundā. Ja perioda <B>ierakstā</b> tiek izlaists <B>brīdinājuma</b> atslēgas vārds, brīdinājums tiks izsūtīts katru reizi, kad tiek atklāta kļūme. Pēc noklusējuma, ja mainās divu secīgu kļūmju izvade, brīdināšanas intervāls tiek ignorēts. Ja vārds &quot;kopsavilkums&quot; ir pēdējais arguments, tad, salīdzinot secīgu kļūmju rezultātu, tiks ņemtas vērā tikai kopsavilkuma izvades līnijas. <P><DT> <B>alertafter</b> <I>num</i> <DD><P><DT> <B>pēc</b> <I>num timval</i> <DD> <B>Atsevišķajam</b> atslēgvārdam ( <B>perioda</b> sadaļā) ir divas formas: tikai ar “num” argumentu vai ar “num timeval” argumentiem. Pirmajā formā brīdinājums tiks izsaukts tikai pēc &quot;num&quot; secīgām kļūmēm. <P> Otrajā formā argumenti ir pozitīvs vesels skaitlis, kam seko intervāls, kā aprakstīts iepriekš <B>intervāla</b> mainīgajā. Ja šie parametri ir norādīti, tad brīdinājumi par šo periodu tiek izsaukti tikai pēc tam, kad šajā laikā ir notikušas daudzas kļūmes. Piemēram, ja <B>trauksmes signālam</b> tiek dots arguments “3 30m”, tad tiek izsaukts trauksmes signāls, ja 30 minūšu laikā notiek 3 kļūmes. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Šis mainīgais norāda serverim kļūdas gadījumā izsaukt ne vairāk kā <I>num</i> brīdinājumus. Trauksmes skaitītājs tiek uzturēts periodiski un tiek atiestatīts pēc katra panākuma. <P><DT> <B>comp_alerts</b> <DD><P> Ja šī opcija ir norādīta, tad upalerts tiks izsaukts tikai tad, ja ir izsaukts atbilstošs trauksmes signāls &quot;uz leju&quot;. <P><DT> <B>trauksmes</b> <I>trauksme [arg ...]</i> <DD> Periodā var būt vairāki brīdinājumi, kas tiek aktivizēti, ja pakalpojums neizdodas. Brīdinājums tiek norādīts ar <B>trauksmes</b> atslēgu, kam seko izvēles <B>izejas</b> parmetrs, un argumenti, kas tiek interpretēti tāpat kā <B>monitora</b> definīcija, bet bez &quot;;;&quot; izņēmums. <B>Izejas</b> parametrs ir <B>exit = x</b> vai <B>exit = xy,</b> un tā rezultātā trauksme tiek izsaukta tikai tad, ja monitora skripta izejas statuss ietilpst <B>izejas</b> parametra diapazonā. Ja, piemēram, trauksmes līnija ir <I>trauksmes izeja = 10-20 mail.alert mis,</i> tad uz <I>pasta trauksmi</i> kā argumentus atsaucas tikai ar <I>mis</i> , ja monitora programmas izejas vērtība ir no 10 līdz 20. Šī funkcija ļauj aktivizēt dažādi brīdinājumi ar dažādu smaguma pakāpi (piemēram, ja brīva vieta diskā ir no 8% līdz 3%). <P> Skatiet iepriekš nodaļu <B>BRĪDINĀJUMA PROGRAMMAS</b> , lai redzētu to vingrotāju sarakstu, kuri automātiski pāriet uz brīdinājuma programmām. <P><DT> <B>upalert</b> <I>brīdinājums [arg ...]</i> <DD> <B>Upalert</b> ir <B>trauksmes</b> kompliments. Upalerts tiek saukts, kad dienesti valstij pāriet no neveiksmes uz panākumiem. <B>Upalert</b> skriptu sauc par tādu pašu parametru piegādi kā <B>trauksmes</b> skripts, pievienojot parametru <B>-u,</b> kuru vienkārši izmanto, lai brīdinājuma skripts zinātu, ka tas tiek saukts par upalert. Katrai perioda definīcijai var norādīt vairākus upalertus. Lūdzu, ņemiet vērā, ka noklusējuma rīcība ir tāda, ka upalert tiks nosūtīts neatkarīgi no tā, vai iepriekš nebija nosūtīti brīdinājumi par “leju”, jo stāvokļa pārejā upalerts tiek aktivizēts. Iestatiet opciju periodiski <B>comp_alerts,</b> lai savienotu pārus ar brīdinājumiem ar “leju”. <P><DT> <B>palaišanas</b> <I>brīdinājums [arg ...]</i> <DD> <B>Starta palaišana</b> tiek izsaukta tikai tad, kad <B>mon</b> serveris sāk izpildi. <P><DT> <B>pēc</b> <I>laika</i> <DD> Parametrs <B>upalertafter</b> tiek norādīts kā virkne, kas seko <B>intervāla</b> parametra sintaksei (“30s”, “1m” utt.) Un kontrolē <B>upalerta palaišanu</b> . Ja pakalpojums tiek atjaunots pēc tam, kad tas ir pārtraukts uz laiku, kas lielāks vai vienāds ar šīs opcijas vērtību, tiek izsaukts <B>upalert</b> . Izmantojiet šo opciju, lai neļautu izsaukt upalerts &quot;blips&quot; (īsu pārtraukumu) dēļ. <P>