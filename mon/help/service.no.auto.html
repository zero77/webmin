<header> MON Hjelp om definisjoner av tjenester </header><p> Dette er andre og siste trinn for MON-konfigurasjon. <p> Standardverdier vises for obligatoriske tjenester <marked in RED color> . Se respektive hjelpeemne nedenfor for mer hjelp om tjenestedefinisjonene. <p> For <b>&quot;mail.alert&quot;</b> , må du forsikre deg om at sendmail er konfigurert og <b>&quot;sendmail&quot;</b> deamon startes på hostmachine. <H3> Tjenestedefinisjoner </H3><P><DL COMPACT><DT> <B>tjenesten</b> <I>tjeneste</i> <DD> En tjeneste definisjon begynner med de søkeord <B>tjeneste</b> etterfulgt av et ord som er koden for denne tjenesten. <P> Komponentene i en tjeneste er en definisjon av intervall, skjerm og en eller flere tidsperioder, som definert nedenfor. <P> Hvis et tjenestenavn &quot;standard&quot; er definert i en klokkegruppe kalt &quot;dafault&quot; (se over), vil standard / standarddefinisjonen brukes til å håndtere ukjente mon-feller. <P><DT> <B>intervall</b> <I>tidsperiode</i> <DD> <B>Søkeordintervallet</b> etterfulgt av en tidsverdi spesifiserer frekvensen for at et monitorskript vil bli utløst. Tidsverdier er definert som &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot;, eller &quot;1d&quot;, som betyr 30 sekunder, 5 minutter, 1 time eller 1 dag. Det numeriske partiet kan være en brøkdel, for eksempel &quot;1,5 time&quot; eller halvannen time. Dette formatet av en <I>tidsspesifikasjon</i> vil bli referert til som <I>tidsavbrudd</i> . <P><DT> <B>traptimeout</b> <I>tid</i> <DD> Dette nøkkelordet tar samme spesifikasjonsargument som <B>intervall</b> <I>,</i> og får tjenesten til å forvente en felle fra en ekstern kilde i det minste som ofte, ellers vil en feil bli registrert. Dette brukes til en hjerteslagstjeneste. <P><DT> <B>trapduration</b> <I>timeval</i> <DD> Hvis en felle mottas, vil statusen til tjenesten som fellen ble levert til normalt forbli konstant. Hvis <B>trapduration</b> er spesifisert, vil statusen til tjenesten forbli i en <I>feiltilstand</i> i den varigheten som er angitt av <I>tidsperioden</i> , og deretter vil den bli tilbakestilt til &quot;suksess&quot;. <P><DT> <B>randskew</b> <I>tideval</i> <DD> I stedet for å planlegge monitoren skriptet til å kjøre ved begynnelsen av hvert intervall, tilfeldig justere intervallet angitt av <B>intervallparameteren</b> med pluss-eller-minus <B>randskew.</b> Skew verdien er angitt som <B>intervall</b> parameter: &quot;30s&quot;, &quot;5m&quot;, osv ... For eksempel hvis <B>intervallet</b> er 1m og <B>randskew</b> er &quot;5S&quot;, så <I>man</i> vil planlegge skjermen manuset litt tid mellom hver 55 sekunder og 65 sekunder. Hensikten er å hjelpe til med å fordele belastningen på serveren når mange tjenester er planlagt med samme intervaller. <P><DT> <B>monitor</b> <I>monitor-name [arg ...]</i> <DD> Nøkkelordet <B>skjerm</b> etterfulgt av et skriptnavn og argumenter Angir skjer å kjøre når timeren utløper. Skjelllignende siteringskonvensjoner følges når du spesifiserer argumentene som skal sendes til monitorskriptet. Skriptet blir påkalt fra katalogen gitt med <B>-s-</b> argumentet, og alle følgende ord blir levert som argumenter til monitorprogrammet, etterfulgt av listen over verter i gruppen som det er referert til av den nåværende klokkegruppen. Hvis monitorlinjen slutter med &quot;;;&quot; som et eget ord, legges vertsgruppene ikke til i argumentlisten når programmet påberopes. <P><DT> <B>allow_empty_group</b> <DD> Alternativet <B>allow_empty_group</b> vil tillate en skjerm å bli påkalt selv når vertsgruppen for den klokken er tom på grunn av deaktiverte verter. Standard oppførsel er ikke å påkalle skjermen når alle verter i en vertsgruppe er deaktivert. <P><DT> <B>beskrivelse</b> <I>beskrivelsetext</i> <DD> Teksten som følger <B>beskrivelse</b> blir forespurt av klientprogrammer, overført til varsler og skjermer via en miljøvariabel. Den skal inneholde en kort beskrivelse av tjenesten, egnet for inkludering i en e-post eller på en webside. <P><DT> <B>ekskluder_hosts</b> <I>host [host ...]</i> <DD> Eventuelle verter som er oppført etter <B>exclude_hosts</b> vil bli ekskludert fra servicesjekk. <P><DT> <B>exclude_period</b> <I>periodspec</i> <DD> Ikke kjør en planlagt skjerm i løpet av tiden identifisert av <I>periodspec</i> . <P><DT> <B>er avhengig av</b> <I>avtrykk</i> <DD> Det <B>avhengige</b> nøkkelordet brukes til å spesifisere et avhengighetsuttrykk, som evalueres til enten sant for usant, i boolsk forstand. Avhengigheter er faktiske Perl-uttrykk, og må overholde alle syntaktiske regler. Uttrykkene blir evaluert i sin egen pakkeplass for ikke å ha en uønsket bivirkning ved et uhell. Hvis det blir funnet en syntaksfeil ved evaluering av uttrykket, logges det via syslog. <P> Før evaluering forekommer følgende substitusjoner på uttrykket: setninger som ser ut som &quot;gruppe: tjeneste&quot; erstattes med verdien av gjeldende driftsstatus for den spesifiserte tjenesten. Disse opstatus-erstatningene beregnes rekursivt, så hvis tjeneste A avhenger av tjeneste B, og tjeneste B avhenger av tjeneste C, så er tjeneste A avhengig av tjeneste C. Vellykkede driftsstatus (som vurderer til &quot;1&quot;) er &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;og&quot; STAT_UNKNOWN &quot;. Ordet &quot;SELF&quot; (i alle caps) kan brukes for gruppen (f.eks. &quot;SELF: service&quot;), og er en forkortelse for den nåværende klokkegruppen. <P> Denne funksjonen kan brukes til å kontrollere varsler for tjenester som er avhengige av andre tjenester, for eksempel en SMTP-test som er avhengig av at maskinen er tilgjengelig. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Evalueringen av avhengighetsgrafer kan kontrollere undertrykkelsen av enten varsling eller overvåke påkallinger. <P> <B>Undertrykkelse av varsler</b> . Hvis dette alternativet er satt til &quot;a&quot;, vil avhengighetsuttrykket bli evaluert etter at monitoren for tjenestens utløp eller etter at en felle er mottatt. Et varsel vil bare bli sendt hvis evalueringen lykkes, noe som betyr at ingen av nodene i avhengighetsgrafen indikerer feil. <P> <B>Overvåk undertrykkelse</b> . Hvis den er satt til &quot;m&quot;, vil avhengighetsuttrykket bli slettet før monitoren for tjenesten er i ferd med å kjøre. Hvis evakueringen lykkes, vil monitoren bli kjørt. Ellers kjøres ikke monitoren, og statusen til tjenesten vil forbli den samme. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Periode definisjoner </H3><P> Perioder brukes til å definere forholdene som skal tillate at varsler skal leveres. <P><DL COMPACT><DT> <B>periode</b> <I>[label:] periodspec</i> <DD> En periode grupperer en eller flere alarmer og variabler som kontrollerer hvor ofte et varsel skjer når det er en feil. <B>Periode</b> nøkkelordet har to former. Den første tar et argument som er en periodespesifikasjon fra Patrick Ryan&#39;s Time :: Period Perl 5-modul. Se &quot;perldoc Time :: Period&quot; for mer informasjon. <P> Den andre formen krever en etikett etterfulgt av en periodespesifikasjon, som definert ovenfor. Etiketten er en kode som består av et alfabetisk tegn eller understrek etterfulgt av null eller flere alfanumeriske tegn eller understrekinger og slutter med et kolon. Denne skjemaet tillater flere perioder med samme periodedefinisjon. En bruk er å ha en definisjon av en periode som ikke har noen andre <B>parametere</b> eller <B>endringer</b> for en bestemt tidsperiode, og en annen for samme tidsperiode med et annet sett varsler som inneholder disse parametrene. <P><DT> <B>alertevery</b> <I>tid</i> <DD> Den <B>alertevery</b> ordet (i løpet av en <B>periode</b> definisjon) tar den samme type av argumentet som <B>intervallet</b> variabel, og begrenser antallet av ganger en melding sendes når tjenesten fortsetter å svikte. For eksempel, hvis intervallet er &quot;1 t&quot;, vil bare varslene i periodeseksjonen bare utløses en gang hver time. Hvis nøkkelordet for <B>alertevery</b> er utelatt i en <B>periodeoppføring</b> , vil det bli sendt ut et varsel hver gang en feil oppdages. Hvis utdataene fra to påfølgende feil ikke endres, overstyres alertevery-intervallet som standard. Hvis ordet &quot;sammendrag&quot; er det siste argumentet, vil bare de sammendragte outputlinjene bli vurdert når du sammenligner resultatet av påfølgende feil. <P><DT> <B>alertafter</b> <I>num</i> <DD><P><DT> <B>altertafter</b> <I>num timeval</i> <DD> Det <B>andre</b> nøkkelordet (i en <B>periodeseksjon</b> ) har to former: bare med &quot;num&quot; -argumentet, eller med &quot;num timeval&quot; -argumentene. I den første formen vil et varsel bare bli påberopt etter &quot;num&quot; påfølgende feil. <P> I den andre formen er argumentene et positivt heltall etterfulgt av et intervall, som beskrevet av <B>intervallvariabelen</b> over. Hvis disse parametrene er spesifisert, vil varslene for den perioden bare bli kalt etter at mange feil oppstår i løpet av det intervallet. Hvis for eksempel blir gitt argumentene &quot;3 30m&quot;, vil <B>alarmet</b> bli kalt hvis 3 feil oppstår i løpet av 30 minutter. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Denne variabelen forteller serveren å ikke ringe mer enn <I>numvarsler</i> under en feil. Varseltelleren holdes per periode og tilbakestilles etter hver suksess. <P><DT> <B>comp_alerts</b> <DD><P> Hvis dette alternativet er spesifisert, vil upalerts bare bli ringt hvis et tilsvarende &quot;ned&quot; -varsel er blitt ringt. <P><DT> <B>varslingsvarsel</b> <I>[arg ...]</i> <DD> En periode kan inneholde flere varsler, som utløses når tjenesten svikter. Et varsel blir spesifisert med <B>varselordet,</b> fulgt av en valgfri <B>utgang</b> parmeter, og argumenter som tolkes på samme måte som <B>skjermen</b> definisjon, men uten &quot;;;&quot; unntak. <B>Avslutningen</b> parameteren tar form av <B>utgang = x</b> eller <B>utgang = xy,</b> og har den virkning at varslingen er bare kalles hvis utgangsstatus for skjermen skriptet faller innenfor området av <B>utløps</b> parameter. Hvis for eksempel <I>varselslinjen</i> er <I>alarm exit = 10-20 mail.alert mis,</i> blir <I>mail-alarm</i> bare påberopt med <I>mis</i> som sine argumenter hvis monitorprogrammets exit-verdi er mellom 10 og 20. Denne funksjonen lar deg utløse forskjellige varsler med forskjellige alvorlighetsnivåer (som når ledig diskplass går fra 8% til 3%). <P> Se <B>ALERT PROGRAMMER-</b> seksjonen ovenfor for en liste over forhåndsmeldere som automatisk vil passere for å varsle programmer. <P><DT> <B>upalert</b> <I>varsling [arg ...]</i> <DD> En <B>upalert</b> er komplimentet til et <B>varsel</b> . En upalert kalles når en tjeneste gjør staten overgangen fra fiasko til suksess. <B>Upalert-</b> skriptet kalles for å levere de samme parametrene som <B>varslingsskriptet</b> , med tillegg av <B>-u-</b> parameteren som ganske enkelt brukes til å la et varslingsskript vite at det kalles som en upalert. Flere oppgraderinger kan spesifiseres for hver periodedefinisjon. Vær oppmerksom på at standardoppførselen er at en upalert vil bli sendt uavhengig av om det var sendt noen tidligere &quot;down&quot; -varsler, siden upalerts utløses ved en statlig overgang. Angi alternativet per periode <B>comp_alerts</b> for å parre upalerts med &quot;ned&quot; -varsler. <P><DT> <B>oppstartsalarm</b> <I>[arg ...]</i> <DD> En <B>startupalert ringes</b> bare når <B>mon-</b> serveren starter utførelsen. <P><DT> <B>oppover etter</b> <I>tid</i> <DD> Parameteren <B>upalertafter</b> er spesifisert som en streng som følger syntaksen til <B>intervallparameteren</b> (&quot;30s&quot;, &quot;1m&quot;, etc.), og kontrollerer utløsningen av en <B>upalert</b> . Hvis en tjeneste kommer opp igjen etter å ha vært nede i en tid som er større enn eller lik verdien av dette alternativet, vil en <B>upalert</b> bli kalt. Bruk dette alternativet for å forhindre at oppringninger blir ringt på grunn av &quot;blips&quot; (korte avbrudd). <P>