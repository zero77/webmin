<header> مساعدة مون في تعريفات الخدمة </header><p style=";text-align:right;direction:rtl"> هذه هي المرحلة الثانية والأخيرة لتكوين MON. <p style=";text-align:right;direction:rtl"> يتم عرض القيم الافتراضية للخدمات الإلزامية <marked in RED color> . راجع موضوع التعليمات المعني أدناه للحصول على مزيد من المساعدة حول تعريفات الخدمة. <p style=";text-align:right;direction:rtl"> بالنسبة لـ <b>&quot;mail.alert&quot;</b> ، تأكد من تكوين mailmail وبدء deamon <b>&quot;sendmail&quot;</b> على الجهاز المضيف. <H3 style=";text-align:right;direction:rtl"> تعريفات الخدمة </H3><P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <I>اسم الخدمة</i> <B>الخدمة</b> <DD> يبدأ تعريف <B>الخدمة</b> بكلمة <B>خدمة</b> الكلمات الرئيسية متبوعة بكلمة هي علامة هذه الخدمة. <P style=";text-align:right;direction:rtl"> مكونات الخدمة عبارة عن فاصل زمني وشاشة وتعريف واحد أو أكثر من تعريفات الفترة الزمنية ، كما هو موضح أدناه. <P style=";text-align:right;direction:rtl"> إذا تم تحديد اسم خدمة &quot;افتراضي&quot; ضمن مجموعة مشاهدة تسمى &quot;dafault&quot; (انظر أعلاه) ، فسيتم استخدام التعريف الافتراضي / الافتراضي للتعامل مع الفخاخ mon غير المعروفة. <P style=";text-align:right;direction:rtl"><DT> <B>فترة</b> <I>timeval</i> <DD> يحدد <B>الفاصل الزمني</b> للكلمة الرئيسية متبوعًا بقيمة زمنية التكرار الذي سيتم فيه تشغيل البرنامج النصي للشاشة. يتم تعريف قيم الوقت على أنها &quot;30 ثانية&quot; أو &quot;5 م&quot; أو &quot;1 س&quot; أو &quot;1 د&quot; ، أي 30 ثانية أو 5 دقائق أو ساعة واحدة أو يوم واحد. قد يكون الجزء الرقمي عبارة عن كسر ، مثل &quot;1.5h&quot; أو ساعة ونصف. سيُشار إلى تنسيق مواصفات الوقت هذا باسم الوقت <I>الزمني</i> . <P style=";text-align:right;direction:rtl"><DT> <B>الفترة</b> <I>الزمنية للسحب</i> <DD> تأخذ هذه الكلمة الرئيسية وسيطة مواصفات الوقت نفسها <B>كفترة</b> <I>،</i> وتجعل الخدمة تتوقع فخًا من مصدر خارجي على الأقل في كثير من الأحيان ، وإلا سيتم تسجيل الفشل. يتم استخدام هذا لخدمة نمط ضربات القلب. <P style=";text-align:right;direction:rtl"><DT> <B>الفترة</b> <I>الزمنية trapduration</i> <DD> إذا تم استلام مصيدة ، فستظل حالة الخدمة التي تم تسليم المصيدة إليها ثابتة عادةً. إذا تم تحديد <B>trapduration</b> ، ستبقى حالة الخدمة في حالة فشل للمدة المحددة حسب <I>الوقت</i> ، ومن ثم سيتم إعادة تعيينها إلى &quot;نجاح&quot;. <P style=";text-align:right;direction:rtl"><DT> <B>الوقت</b> <I>راندسكيو</i> <DD> بدلاً من جدولة البرنامج النصي للشاشة ليتم تشغيله في بداية كل فاصل زمني ، اضبط الفاصل الزمني المحدد بواسطة معلمة <B>الفاصل</b> عشوائيًا عن طريق علامة زائد أو ناقص <B>.</b> يتم تحديد قيمة الانحراف كمعلمة <B>الفاصل الزمني</b> : &quot;30s&quot; ، &quot;5m&quot; ، إلخ ... على سبيل المثال إذا كان <B>الفاصل الزمني</b> 1m ، و <B>randskew</b> هو &quot;5s&quot; ، فسيقوم <I>mon</i> بجدولة البرنامج النصي للشاشة في وقت ما بين كل 55 ثانية و 65 ثانية. الهدف هو المساعدة في توزيع الحمل على الخادم عندما تتم جدولة العديد من الخدمات في نفس الفترات الزمنية. <P style=";text-align:right;direction:rtl"><DT> <B>مراقبة</b> <I>اسم الشاشة [مناقشة ...]</i> <DD> <B>رصد</b> الكلمة تليها اسم النصي والحجج يحدد جهاز العرض لتشغيل عند انتهاء الموقت. يتم اتباع اصطلاحات الاقتباس التي تشبه القشرة عند تحديد الوسيطات لإرسالها إلى البرنامج النصي للشاشة. يتم استدعاء البرنامج النصي من الدليل المعطى بحجة <B>-s</b> ، ويتم توفير جميع الكلمات التالية كوسيطة لبرنامج المراقبة ، متبوعة بقائمة المضيفين في المجموعة المشار إليها بواسطة مجموعة المراقبة الحالية. إذا انتهى خط المراقبة بـ &quot;؛؛&quot; ككلمة منفصلة ، لا يتم إلحاق مجموعات المضيف بقائمة الوسيطات عند استدعاء البرنامج. <P style=";text-align:right;direction:rtl"><DT> <B>allow_empty_group</b> <DD> سيسمح الخيار <B>allow_empty_group</b> باستدعاء الشاشة حتى عندما تكون مجموعة المضيف لهذه الساعة فارغة بسبب تعطيل المضيفين. السلوك الافتراضي هو عدم استدعاء الشاشة عندما يتم تعطيل جميع المضيفين في مجموعة المضيف. <P style=";text-align:right;direction:rtl"><DT> <B>وصف</b> <I>descriptiontext</i> <DD> يتم الاستعلام عن النص التالي <B>الوصف</b> بواسطة برامج العميل ، وتمريره إلى التنبيهات والشاشات عبر متغير بيئة. يجب أن يحتوي على وصف موجز للخدمة ، مناسب للتضمين في بريد إلكتروني أو على صفحة ويب. <P style=";text-align:right;direction:rtl"><DT> <B>hoste_hosts</b> <I>host [مضيف ...]</i> <DD> سيتم استبعاد أي مضيفين مدرجين بعد <B>exclude_hosts</b> من فحص الخدمة. <P style=";text-align:right;direction:rtl"><DT> <B>باستثناء</b> <I>فترة</i> <B>الفترة</b> <I>الزمنية</i> <DD> لا تقم بتشغيل شاشة مجدولة خلال الوقت المحدد بواسطة <I>spececec</i> . <P style=";text-align:right;direction:rtl"><DT> <B>تعتمد على</b> <I>التعبير</i> <DD> <B>وتعتمد</b> الكلمة يستخدم لتحديد تعبير التبعية، التي يقيم إما صحيح كاذبة، بمعنى منطقية. التبعيات هي تعبيرات Perl فعلية ، ويجب أن تلتزم بجميع القواعد النحوية. يتم تقييم التعبيرات في مساحة العبوة الخاصة بها حتى لا يكون لها بعض الآثار الجانبية غير المرغوب فيها عن طريق الخطأ. إذا تم العثور على خطأ في بناء الجملة عند تقييم التعبير ، يتم تسجيله عبر سجل النظام. <P style=";text-align:right;direction:rtl"> قبل التقييم ، تحدث الاستبدالات التالية على التعبير: يتم استبدال العبارات التي تبدو مثل &quot;group: service&quot; بقيمة حالة التشغيل الحالية لهذه الخدمة المحددة. يتم حساب بدائل opstatus هذه بشكل متكرر ، لذلك إذا كانت الخدمة A تعتمد على الخدمة B ، وتعتمد الخدمة B على الخدمة C ، فإن الخدمة A تعتمد على الخدمة C. حالات التشغيل الناجحة (التي يتم تقييمها إلى &quot;1&quot;) هي &quot;STAT_OK&quot; ، &quot;STAT_COLDSTART &quot;و&quot; STAT_WARMSTART &quot;و&quot; STAT_UNKNOWN &quot;. يمكن استخدام كلمة &quot;SELF&quot; (بكل الأحرف الكبيرة) للمجموعة (مثل &quot;SELF: service&quot;) ، وهي اختصار لمجموعة المراقبة الحالية. <P style=";text-align:right;direction:rtl"> يمكن استخدام هذه الميزة للتحكم في التنبيهات الخاصة بالخدمات التي تعتمد على خدمات أخرى ، على سبيل المثال اختبار SMTP الذي يعتمد على إمكانية الوصول إلى جهاز ping. <P style=";text-align:right;direction:rtl"><DT> <B>سلوك الإخلاء</b> <I>{a | m}</i> <DD> يمكن لتقييم الرسوم البيانية التبعية التحكم في قمع التنبيهات أو مراقبة الاستدعاءات. <P style=";text-align:right;direction:rtl"> <B>قمع التنبيه</b> . إذا تم تعيين هذا الخيار على &quot;a&quot; ، فسيتم تقييم تعبير التبعية بعد خروج الشاشة للخدمة أو بعد استلام اعتراض. لن يتم إرسال تنبيه إلا إذا نجح التقييم ، مما يعني أنه لا توجد أي عقد في الرسم البياني للتبعية تشير إلى الفشل. <P style=";text-align:right;direction:rtl"> <B>رصد القمع</b> . إذا تم تعيينه على &quot;m&quot; ، فسيتم إخلاء تعبير التبعية قبل أن يبدأ تشغيل الشاشة للخدمة. إذا نجحت عملية الإخلاء ، فسيتم تشغيل الشاشة. خلاف ذلك ، لن يتم تشغيل الشاشة وستبقى حالة الخدمة كما هي. <P style=";text-align:right;direction:rtl"></DL><A NAME="lbAO">&nbsp;</A><H3 style=";text-align:right;direction:rtl"> تعريفات الفترة </H3><P style=";text-align:right;direction:rtl"> يتم استخدام الفترات لتحديد الشروط التي يجب أن تسمح بتسليم التنبيهات. <P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <B>فترة</b> <I>[التسمية:] periodspec</i> <DD> تجمع الفترة إنذارًا واحدًا أو أكثر ومتغيرات تتحكم في عدد مرات حدوث التنبيه عند حدوث فشل. الكلمة الأساسية <B>الفترة</b> لها شكلين. يأخذ الأول حجة وهي مواصفات الفترة من باتريك رايان Time :: Period Perl 5 module. راجع &quot;perldoc Time :: Period&quot; لمزيد من المعلومات. <P style=";text-align:right;direction:rtl"> يتطلب النموذج الثاني تسمية متبوعة بمواصفات الفترة ، كما هو محدد أعلاه. التسمية عبارة عن علامة تتكون من حرف أبجدي أو شرطة سفلية متبوعة بصفر أو أكثر من الأحرف الأبجدية الرقمية أو الشرطة السفلية وتنتهي بنقطتين. يسمح هذا النموذج بفترات متعددة بنفس تعريف الفترة. أحد الاستخدامات هو أن يكون لديك تعريف فترة لا <B>يحتوي على</b> معلمات <B>تنبيه</b> أو <B>تنبيه</b> لكل فترة زمنية معينة ، وآخر لنفس الفترة الزمنية مع مجموعة مختلفة من التنبيهات التي تحتوي على هذه المعلمات. <P style=";text-align:right;direction:rtl"><DT> <B>زمن</b> <I>التنبيه</i> <DD> <B>تأخذ</b> الكلمة الأساسية <B>التنبيه</b> (ضمن تعريف <B>الفترة</b> ) نفس نوع الوسيطة كمتغير <B>الفاصل</b> ، وتحد من عدد مرات إرسال تنبيه عند استمرار فشل الخدمة. على سبيل المثال ، إذا كان الفاصل الزمني &quot;ساعة واحدة&quot; ، فسيتم تشغيل التنبيهات في قسم الفترة مرة واحدة فقط كل ساعة. إذا تم حذف كلمة <B>التنبيه</b> في إدخال الفترة ، فسيتم إرسال تنبيه في كل مرة يتم فيها اكتشاف فشل. بشكل افتراضي ، إذا تغير ناتج فشلان متعاقبان ، فسيتم تجاوز الفاصل الزمني للتنبيه. إذا كانت كلمة &quot;الملخص&quot; هي الوسيطة الأخيرة ، فسيتم فقط مراعاة سطور إخراج الملخص عند مقارنة ناتج الفشل المتتالي. <P style=";text-align:right;direction:rtl"><DT> <B>alertafter</b> <I>الأسطوانات</i> <DD><P style=";text-align:right;direction:rtl"><DT> <B>تنبيه</b> <I>التنبيه الزمني</i> <DD> <B>تحتوي</b> الكلمة الأساسية <B>التنبيهية</b> (ضمن قسم <B>الفترة</b> ) على شكلين: فقط مع وسيطة &quot;num&quot; ، أو باستخدام وسيطات &quot;num timeval&quot;. في النموذج الأول ، سيتم استدعاء التنبيه فقط بعد حالات الفشل المتتالية &quot;عدد&quot;. <P style=";text-align:right;direction:rtl"> في النموذج الثاني ، الوسيطات هي عدد صحيح موجب يتبعه فاصل ، كما هو موضح بواسطة متغير <B>الفاصل</b> أعلاه. إذا تم تحديد هذه المعلمات ، فسيتم استدعاء التنبيهات لتلك الفترة فقط بعد حدوث العديد من حالات الفشل خلال تلك الفترة. على سبيل المثال ، إذا تم إعطاء <B>التنبيه بعد</b> الوسيطات &quot;3 30 م&quot; ، فسيتم استدعاء التنبيه إذا حدث 3 إخفاقات في غضون 30 دقيقة. <P style=";text-align:right;direction:rtl"><DT> <B>numalerts</b> <I>الأسطوانات</i> <DD><P style=";text-align:right;direction:rtl"> هذا المتغير يقول الخادم لدعوة ما لا يزيد عن التنبيهات <I>الأسطوانات</i> أثناء فشل. يتم الاحتفاظ بعداد التنبيه على أساس كل فترة ، ويتم إعادة تعيينه عند كل نجاح. <P style=";text-align:right;direction:rtl"><DT> <B>comp_alerts</b> <DD><P style=";text-align:right;direction:rtl"> إذا تم تحديد هذا الخيار ، فلن يتم استدعاء الترقيات إلا إذا تم استدعاء تنبيه &quot;أسفل&quot; مقابل. <P style=";text-align:right;direction:rtl"><DT> <B>تنبيه</b> <I>التنبيه [مناقشة ...]</i> <DD> قد تحتوي الفترة على تنبيهات متعددة يتم تشغيلها عند فشل الخدمة. يتم تحديد <B>التنبيه باستخدام</b> الكلمة الأساسية <B>للتنبيه</b> ، متبوعًا بمعامل <B>خروج</b> اختياري ، والوسيطات التي يتم تفسيرها بنفس تعريف تعريف <B>الشاشة</b> ، ولكن بدون &quot;؛؛&quot; استثناء. تأخذ معلمة <B>الخروج</b> شكل <B>exit = x</b> أو <B>exit = xy</b> ولها تأثير أن التنبيه يُسمى فقط إذا كانت حالة الخروج من البرنامج النصي للشاشة تقع ضمن نطاق معلمة <B>الخروج</b> . على سبيل المثال ، إذا كان خط التنبيه هو <I>خروج التنبيه = 10-20 mail.alert mis</i> <I>،</i> فسيتم استدعاء <I>التنبيه بالبريد</i> فقط مع <I>الخطأ</i> <I>كوسيطاته</i> إذا كانت قيمة خروج برنامج المراقبة بين 10 و 20. تسمح لك هذه الميزة بتشغيل تنبيهات مختلفة عند مستويات خطورة مختلفة (مثل عندما تتحول مساحة القرص الحرة من 8٪ إلى 3٪). <P style=";text-align:right;direction:rtl"> راجع قسم <B>ALERT PROGRAMS</b> أعلاه للحصول على قائمة بالأرقام التي سيتم تمريرها تلقائيًا إلى برامج التنبيه. <P style=";text-align:right;direction:rtl"><DT> <I>تنبيه</i> <B>صاعد</b> <I>[</i> <B>مناقشة</b> <I>...]</i> <DD> <B>المرتفع</b> هو مجاملة <B>لتنبيه</b> . يتم استدعاء رفع المستوى عندما تجعل الخدمات انتقال الدولة من الفشل إلى النجاح. <B>يُطلق على</b> البرنامج النصي <B>upalert</b> تزويد نفس المعلمات مثل البرنامج النصي <B>للتنبيه</b> ، مع إضافة المعلمة <B>-u</b> التي تُستخدم ببساطة للسماح للنص البرمجي للتنبيه بمعرفة أنه يُسمى على أنه upalert. يمكن تحديد ترقيات متعددة لكل تعريف فترة. يرجى ملاحظة أن السلوك الافتراضي هو أنه سيتم إرسال upalert بغض النظر عما إذا كان قد تم إرسال أي تنبيهات &quot;لأسفل&quot; مسبقة ، حيث يتم تشغيل upalert عند انتقال الحالة. قم بتعيين خيار <B>comp_alerts</b> لكل فترة <B>لإقران</b> upalerts مع تنبيهات &quot;down&quot;. <P style=";text-align:right;direction:rtl"><DT> <I>تنبيه</i> <B>بدء التشغيل</b> <I>[مناقشة ...]</i> <DD> يتم استدعاء <B>بدء التشغيل</b> فقط عندما يبدأ خادم <B>mon</b> التنفيذ. <P style=";text-align:right;direction:rtl"><DT> <B>upalertafter</b> <I>timeval</i> <DD> يتم تحديد المعلمة <B>upalertafter</b> كسلسلة تتبع بناء جملة المعلمة <B>الفاصلة</b> (&quot;30s&quot; ، &quot;1m&quot; ، إلخ) ، وتتحكم في تشغيل <B>upalert</b> . إذا عادت الخدمة بعد <B>التعطل</b> لفترة أكبر من أو تساوي قيمة هذا الخيار ، فسيتم استدعاء <B>upalert</b> . استخدم هذا الخيار لمنع استدعاء upalerts بسبب &quot;blips&quot; (فترات انقطاع قصيرة). <P style=";text-align:right;direction:rtl">