<header> MON pomoć u definicijama usluga </header><p> Ovo je druga i zadnja faza za MON konfiguraciju. <p> Zadane vrijednosti prikazane su za Obavezne usluge <marked in RED color> , Pogledajte donju temu pomoći radi dodatne pomoći u Definicijama usluga. <p> Za <b>&quot;mail.alert&quot;</b> provjerite je li sendmail konfiguriran i deamon <b>&quot;sendmail&quot;</b> pokrenut na hostmachine. <H3> Definicije usluga </H3><P><DL COMPACT><DT> <B>usluga</b> <I>SERVICENAME</i> <DD> Definicija usluge započinje <B>uslugom</b> ključne riječi, a slijedi riječ koja je oznaka za ovu uslugu. <P> Sastavni dijelovi usluge su interval, monitor i jedna ili više definicija vremenskog razdoblja, kako je definirano u nastavku. <P> Ako je naziv usluge &quot;zadano&quot; definiran u grupi promatranja zvanoj &quot;dafault&quot; (vidi gore), tada će se zadana / zadana definicija koristiti za rukovanje nepoznatim mon zamkama. <P><DT> <B>interval</b> <I>timeval</i> <DD> <B>Interval</b> ključnih riječi praćen vremenskom vrijednošću određuje učestalost pokretanja skripte za praćenje. Vremenske vrijednosti definiraju se kao &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot; ili &quot;1d&quot;, što znači 30 sekundi, 5 minuta, 1 sat ili 1 dan. Brojčani dio može biti frakcija, poput &quot;1,5h&quot; ili sat i pol. Ovaj format vremenske specifikacije <I>nazivat</i> će se vremenski interval. <P><DT> <B>traptimeout</b> <I>timeval</i> <DD> Ova ključna riječ ima isto vrijeme specifikacija argument kao <B><I>interval,</i></b> i čini uslugu očekivati zamku iz vanjskog izvora barem da često, drugi neuspjeh će biti registriran. Koristi se za uslugu u obliku otkucaja srca. <P><DT> <B>trapduration</b> <I>timeval</i> <DD> Ako se primi zamka, status usluge u koju je zamka dostavljena normalno će ostati konstantan. Ako <B>trapduration</b> je navedeno, status usluge će ostati u stanju neuspjeha u trajanju koje <I>timeval,</i> a onda će se vratiti na „uspjeh”. <P><DT> <B>randskew</b> <I>timeval</i> <DD> Umjesto da zakažete skriptu monitora na početku svakog intervala, nasumično podesite interval naveden parametrom <B>intervala</b> plus-ili-minus <B>redndskew.</b> Vrijednost nagiba određuje se kao parametar <B>intervala</b> : &quot;30s&quot;, &quot;5m&quot; itd. ... Na primjer, ako je <B>interval</b> 1m, a <B>randskew</b> &quot;5s&quot;, <I>mon</i> će zakazati skriptu monitora neko vrijeme između svakih 55 sekundi i 65 sekundi. Namjera je pomoći raspodijeliti opterećenje na poslužitelju kada su zakazane mnoge usluge u istim intervalima. <P><DT> <B>monitor</b> <I>monitor-ime [arg ...]</i> <DD> <B>Monitor</b> ključne riječi praćen imenom skripte i argumentima određuje monitor koji će se pokretati kad istekne tajmer. Shell-like konvencije citiranja slijede se prilikom navođenja argumenata za slanje u skriptu monitora. Skripta se poziva iz mape koja je data argumentom <B>-s</b> , a sve sljedeće riječi isporučuju se kao argumenti programu praćenja, nakon čega slijedi popis domaćina u grupi na koju upućuje trenutna grupa gledanja. Ako se linija monitora završava s &quot;;&quot; Kao zasebna riječ, grupe domaćina nisu dodane popisu argumenata kada se program poziva. <P><DT> <B>allow_empty_group</b> <DD> Opcija <B>enable_empty_group</b> omogućit će pozivanje monitora čak i kada je grupa domaćina tog sata prazna zbog onemogućenih računala. Zadano ponašanje nije pozivanje monitora kada su svi domaćini u grupi domaćina onemogućeni. <P><DT> <B>opis</b> <I>opisa</i> <DD> Tekst nakon <B>opisa opisan</b> je od strane klijentskog programa, prosljeđuje se upozorenjima i monitorima putem varijable okoline. Trebao bi sadržavati kratak opis usluge, pogodan za uključivanje u e-poštu ili na web stranicu. <P><DT> <B>izuzeti_hostove</b> <I>host [host ...]</i> <DD> Svi domaćini koji su navedeni nakon <B>isključenja_hostovi</b> bit će isključeni iz provjere usluge. <P><DT> <B>izuzeti_period</b> <I>periodepec</i> <DD> Ne <I>pokretajte</i> zakazani monitor tijekom vremena određenog <I>periodpec-om</i> . <P><DT> <B>ovisiti o</b> <I>ekspresiji</i> <DD> <B>Ovisit</b> ključna riječ se koristi za određivanje izraz ovisnosti, koja procjenjuje kako bi bilo istinito lažno, u Boolean smislu. Ovisnosti su stvarni Perl izrazi i moraju se pridržavati svih sintaktičkih pravila. Izrazi se procjenjuju u vlastitom prostoru paketa kako slučajno ne bi došlo do neželjenih nuspojava. Ako se prilikom procjene izraza pronađe sintaksička pogreška, ona se bilježi putem syslog-a. <P> Prije evaluacije, pojavljuju se sljedeće zamjene u izrazu: izrazi koji izgledaju kao &quot;grupa: usluga&quot; zamjenjuju se vrijednosti trenutnog operativnog statusa navedene navedene usluge. Ove zamjene opstatusa računaju se rekurzivno, tako da ako usluga A ovisi o usluzi B, a usluga B ovisi o usluzi C, tada usluga A ovisi o usluzi C. Uspješni operativni statusi (koji se procjenjuju na &quot;1&quot;) su &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;i&quot; STAT_UNKNOWN &quot;. Riječ &quot;SAMO&quot; (u svim velikim slovima) može se koristiti za grupu (npr. &quot;SELF: usluga&quot;) i kratica je za trenutnu grupu gledanja. <P> Ova se značajka može koristiti za kontrolu upozorenja za usluge koje ovise o drugim uslugama, npr. SMTP test ovisno o stroju koji je ping dostupan. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Procjena grafova ovisnosti može kontrolirati suzbijanje upozorenja ili nadziranja poziva. <P> <B>Suzbijanje upozorenja</b> Ako je ova opcija postavljena na &quot;a&quot;, izraz ovisnosti procjenjivat će se nakon što monitor za uslugu izađe ili nakon što primi zamku. Upozorenje će se poslati samo ako evaluacija uspije, što znači da nijedan čvor na grafikonu ovisnosti ne pokazuje neuspjeh. <P> <B>Nadgledanje suzbijanja</b> . Ako je postavljeno na &quot;m&quot;, tada će izraz ovisnosti biti isparavan prije nego što se monitor za uslugu spremi. Ako isparavanje uspije, tada će se monitor pokrenuti. Inače se monitor neće pokrenuti i status usluge ostat će isti. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Definicije razdoblja </H3><P> Periodi se koriste za definiranje uvjeta koji bi trebali omogućiti dostavu upozorenja. <P><DL COMPACT><DT> <B>period</b> <I>[oznaka:] periodpec</i> <DD> Razdoblje grupira jedan ili više alarma i varijabli koje kontroliraju koliko često se upozorenje događa kada dođe do kvara. Ključna riječ <B>razdoblja</b> ima dva oblika. Prvi uzima argument koji je specifikacija razdoblja iz modula Vrijeme: Period Perl 5 Patricka Ryana. Pogledajte &quot;Perldoc Vrijeme: razdoblje&quot; za više informacija. <P> Drugi oblik zahtijeva oznaku nakon koje slijedi specifikacija razdoblja, kako je gore definirano. Oznaka je oznaka koja se sastoji od abecednog znaka ili podvlake, a slijedi nula ili više alfanumerika ili podvlaka, a završava dvotočkom. Ovaj obrazac omogućuje više razdoblja s istom definicijom razdoblja. Jedna upotreba je definiranje razdoblja koje nema <B>upozorenja</b> ili parametre <B>upozorenja</b> za određeno vremensko razdoblje, a drugo za isto vremensko razdoblje s drugačijim skupom upozorenja koje sadrže te parametre. <P><DT> <B>alertevery</b> <I>timeval</i> <DD> <B>Ključna</b> riječ <B>upozorenja</b> (unutar definicije <B>razdoblja</b> ) uzima istu vrstu argumenta kao varijabla <B>intervala</b> i ograničava broj slanja upozorenja kada usluga i dalje prestaje raditi. Na primjer, ako je interval &quot;1h&quot;, samo će se upozorenja u odjeljku razdoblja pokrenuti samo jednom svakih sat vremena. Ako je <B>ključna</b> riječ <B>upozorenja</b> izostavljena u unosu razdoblja, upozorenje će se slati svaki put kada se otkrije kvar. Prema zadanom, ako se promijeni izlaz dva uzastopna kvara, tada se interval alarma prekoračuje. Ako je riječ &quot;sažetak&quot; posljednji argument, tada će se upoređivati samo redovi izlaza sažetka pri uspoređivanju rezultata uzastopnih kvarova. <P><DT> <B>upozorenje</b> <I>broj</i> <DD><P><DT> <B>alarmafter</b> <I>num</i> <B>timeval</b> <DD> <B>Ključna</b> riječ <B>upozorenja</b> (u odjeljku <B>razdoblja</b> ) ima dva oblika: samo s argumentom &quot;num&quot; ili s argumentima &quot;num timeval&quot;. U prvom obliku, upozorenje će se pozivati samo nakon uzastopnih &quot;neuspjelih&quot; kvarova. <P> U drugom su obliku argumenti pozitivan cijeli broj koji slijedi interval, kao što je opisano gornjom varijablom <B>intervala</b> . Ako su navedeni parametri, tada će se upozoriti za to razdoblje tek nakon što se u tom intervalu dogodi mnogo kvarova. Na primjer, ako je <B>uzbuđivaču</b> naveden argument &quot;3 30m&quot;, upozorit će se ako se u roku od 30 minuta dogodi 3 kvara. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Ova varijabla govori da poslužitelj ne više od <I>num</i> upozorenja nazvati tijekom nestanka. Brojač upozorenja održava se povremeno i resetira se nakon svakog uspjeha. <P><DT> <B>comp_alerts</b> <DD><P> Ako je navedena opcija, upalerti će se pozivati samo ako je pozvano odgovarajuće upozorenje &quot;dolje&quot;. <P><DT> <B>upozorenje</b> <I>upozorenja [arg ...]</i> <DD> Period može sadržavati više upozorenja koja se pokreću nakon neuspjeha usluge. Upozorenje je određeno ključnom riječi <B>upozorenja</b> , nakon čega slijedi neobavezni <B>izlazni</b> parmetar i argumenti koji se tumače isto kao i definicija <B>monitora</b> , ali bez značaja &quot;;&quot; iznimka. <B>Izlazni</b> parametar ima oblik <B>izlaza = x</b> ili <B>izlaza = xy</b> i ima za posljedicu da se upozorenje poziva samo ako status izlaza skripte monitora padne u rasponu <B>izlaznog</b> parametra. Ako je, na primjer, linija <I>upozorenja izlaz iz upozorenja = 10-20 mail.alert mis</i> <I>, upozorenje e-pošte</i> će se pozivati <I>pogrešno</i> kao njegovi argumenti ako je izlazna vrijednost programa za praćenje između 10 i 20. Ova značajka vam omogućuje pokretanje različite upozorenja različitih stupnjeva ozbiljnosti (primjerice kada slobodni prostor na disku iznosi od 8% do 3%). <P> Pogledajte odjeljak <B>ALERT PROGRAMS</b> gore za popis pramatera koji će automatski biti proslijeđeni programima upozorenja. <P><DT> <I>upozorenje</i> <B>upalert</b> <I>[arg ...]</i> <DD> <B>Upalert</b> je kompliment <B>upozorenja</b> . Upalert se naziva kada neka usluga prijeđe stanje od neuspjeha do uspjeha. Skripta <B>upalert</b> naziva se isporučuje iste parametre kao i skripta <B>upozorenja</b> , uz dodavanje parametra <B>-u</b> koji se jednostavno koristi da bi se skripti upozorenja znalo da se zove kao upalert. Za svaku definiciju razdoblja može se odrediti više upozoravanja. Imajte na umu da je zadano ponašanje da će se poslati upalert bez obzira da li su poslana prethodna upozorenja o dolje, budući da se upalerti aktiviraju na prijelazu stanja. Postavite opciju <B>comp_alerts za</b> razdoblje da biste upotrijebili upozorenja s upozorenjima &quot;dolje&quot;. <P><DT> <I>upozorenje o</i> <B>startupalertu</b> <I>[arg ...]</i> <DD> <B>Pokretanje programa</b> naziva se samo kada <B>mon</b> poslužitelj započne izvršenje. <P><DT> <B>upalertafter</b> <I>timeval</i> <DD> Parametar <B>upalertafter</b> specificiran je kao niz koji prati sintaksu parametra <B>intervala</b> (&quot;30s&quot;, &quot;1m&quot; itd.) I kontrolira pokretanje <B>upalerta</b> . Ako se usluga ponovno pokreće nakon što je prekinuta vrijeme veće ili jednako vrijednosti ove opcije, <B>pozvat</b> će se <B>upalert</b> . Pomoću ove opcije spriječite pozivanje upalera zbog &quot;klika&quot; (kratkih kvarova). <P>