<header> راهنما MON در تعریف خدمات </header><p style=";text-align:right;direction:rtl"> این مرحله دوم و آخرین مرحله برای پیکربندی MON است. <p style=";text-align:right;direction:rtl"> مقادیر پیش فرض برای خدمات اجباری نشان داده شده است <marked in RED color> . برای راهنمایی بیشتر در مورد تعریف خدمات ، به عنوان راهنمای مربوطه در زیر مراجعه کنید. <p style=";text-align:right;direction:rtl"> برای <b>&quot;mail.alert&quot;</b> ، اطمینان حاصل کنید که ارسال نامه پیکربندی شده است و deamon <b>&quot;sendmail&quot;</b> در میزبان شروع شده است. <H3 style=";text-align:right;direction:rtl"> تعریف خدمات </H3><P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <B>سرویس</b> <I>دهنده</i> <B>خدمات</b> <DD> تعریف خدمات با <B>سرویس</b> کلمات کلیدی آنها شروع می شود و کلمه ای که برچسب این سرویس است ، می باشد. <P style=";text-align:right;direction:rtl"> اجزای یک سرویس عبارتند از بازه ، مانیتور و یک یا چند تعریف دوره زمانی ، که در زیر تعریف شده است. <P style=";text-align:right;direction:rtl"> اگر نام سرویس &quot;پیش فرض&quot; در یک گروه دیده بان به نام &quot;dafault&quot; تعریف شود (در بالا را ببینید) ، در این صورت تعریف پیش فرض / پیش فرض برای دست زدن به تله های ناشناخته استفاده می شود. <P style=";text-align:right;direction:rtl"><DT> <B>فاصله</b> <I>timeval</i> <DD> <B>فاصله</b> کلمه کلیدی و به دنبال آن یک مقدار زمان ، فرکانس انجام یک اسکریپت مانیتور را مشخص می کند. مقادیر زمانی به صورت &quot;30s&quot; ، &quot;5m&quot; ، &quot;1h&quot; یا &quot;1d&quot; تعریف شده اند ، به معنی 30 ثانیه ، 5 دقیقه ، 1 ساعت یا 1 روز. بخش عددی ممکن است کسری باشد ، مانند &quot;1.5 ساعت&quot; یا یک ساعت و نیم. این فرمت از یک مشخصه زمان خواهد شد به عنوان <I>timeval</i> اشاره شده است. <P style=";text-align:right;direction:rtl"><DT> <B>بازه</b> <I>زمانی traptimeout</i> <DD> این کلمه کلیدی طول می کشد همان زمان بحث مشخصات به عنوان <B><I>فاصله،</i></b> و باعث می شود سرویس انتظار دام از یک منبع خارجی حداقل که اغلب، دیگری یک شکست ثبت خواهند شد. این مورد برای یک سرویس ضربان قلب مورد استفاده قرار می گیرد. <P style=";text-align:right;direction:rtl"><DT> <B>مدت زمان</b> <I>دامپزشکی</i> <DD> اگر تله ای دریافت شود ، وضعیت خدمتی که تله به آن تحویل داده می شود ، به طور معمول ثابت خواهد ماند. اگر <B>trapduration</b> مشخص شده باشد، وضعیت خدمات را در حالت شکست برای مدت زمان مشخص شده توسط <I>timeval</i> باقی می ماند، و سپس آن را به تنظیم مجدد &quot;موفقیت&quot;. <P style=";text-align:right;direction:rtl"><DT> <B>بازه</b> <I>زمانی</i> <DD> به جای برنامه زمانبندی اسکریپت مانیتور برای شروع در شروع هر فاصله ، بطور تصادفی فاصله مشخص شده توسط پارامتر <B>فاصله را</b> با استفاده از <B>تقاطع اضافی</b> یا منفی <B>تنظیم کنید.</b> مقدار skew به عنوان پارامتر <B>فاصله</b> مشخص شده است: &quot;30s&quot; ، &quot;5m&quot; و غیره ... به عنوان مثال اگر <B>فاصله</b> 1m باشد و <B>randskew</b> &quot;5s&quot; باشد ، در این صورت <I>mon</i> هر وقت <B>فیلمبرداری</b> مانیتور را بین هر 55 ثانیه و 65 ثانیه هدف این است که کمک به توزیع بار در سرور هنگامی که بسیاری از خدمات در فواصل یکسان برنامه ریزی شده اند. <P style=";text-align:right;direction:rtl"><DT> <B>مانیتور</b> <I>مانیتور [arg ...]</i> <DD> <B>مانیتور</b> کلمه کلیدی به دنبال نام اسکریپت و آرگومان ها مانیتور را مشخص می کند که زمان تایمر به پایان برسد. قراردادهای نقل قول مانند شل هنگام تعیین استدلال برای ارسال به اسکریپت مانیتور دنبال می شوند. اسکریپت از دایرکتوری داده شده با استدلال <B>-s</b> فراخوانی می شود ، و کلمات زیر به عنوان آرگومان برای برنامه مانیتور تهیه می شوند و پس از آن لیست میزبان های گروه مورد نظر توسط گروه تماشای فعلی ارائه می شود. اگر خط مانیتور با &quot;؛؛&quot; پایان یابد به عنوان یک کلمه جداگانه ، گروه های میزبان هنگام فراخوانی برنامه به لیست آرگومان ها اضافه نمی شوند. <P style=";text-align:right;direction:rtl"><DT> <B>اجازه_مپتی_گروپ</b> <DD> گزینه <B>perm_empty_group به</b> شما امکان می دهد مانیتور فراخوانی شود حتی اگر گروه میزبان برای آن ساعت خالی باشد زیرا میزبان معلول است. رفتار پیش فرض عدم استفاده از مانیتور در هنگام غیرفعال بودن همه میزبان ها در یک گروه میزبان است. <P style=";text-align:right;direction:rtl"><DT> <B>توضیحات</b> <I>توضیحات</i> <DD> <B>توضیحات</b> زیر توسط برنامه های مشتری درخواست می شود ، از طریق یک متغیر محیط به هشدارها و مانیتورها منتقل می شود. این شامل شرح مختصری از خدمات ، مناسب برای درج ایمیل یا صفحه وب است. <P style=";text-align:right;direction:rtl"><DT> <B>exclude_hosts</b> <I>[میزبان ...]</i> <DD> میزبان های ذکر شده پس از <B>exclus_host</b> ها از بررسی خدمات خارج خواهند شد. <P style=";text-align:right;direction:rtl"><DT> <B>exclude_period</b> <I>periodspec</i> <DD> یک مانیتور برنامه ریزی شده را در زمان مشخص شده توسط <I>periodspec</i> اجرا <I>نکنید</i> . <P style=";text-align:right;direction:rtl"><DT> <B>بستگی دارد</b> <I>dependexpression</i> <DD> <B>بستگی دارد</b> کلمه کلیدی استفاده می شود برای مشخص کردن یک عبارت وابستگی، که ارزیابی یا درست از نادرست، به این معنا داده منطقی. وابستگی عبارت واقعی Perl است ، و باید از تمام قوانین نحوی پیروی کند. عبارات در فضای بسته خود مورد ارزیابی قرار می گیرند تا به طور تصادفی عوارض جانبی ناخواسته نداشته باشند. اگر هنگام ارزیابی عبارت خطای نحوی پیدا شود ، از طریق syslog وارد می شوید. <P style=";text-align:right;direction:rtl"> قبل از ارزیابی ، تعویض زیر در مورد عبارت رخ می دهد: عباراتی که به نظر می رسد &quot;گروه: خدمات&quot; هستند با ارزش وضعیت عملیاتی فعلی آن سرویس مشخص جایگزین می شوند. این تعویض های opstatus بصورت بازگشتی محاسبه می شوند ، بنابراین اگر سرویس A به خدمات B بستگی دارد و سرویس B به خدمات C بستگی دارد ، خدمات A به خدمات بستگی دارد. &quot;،&quot; STAT_WARMSTART &quot;و&quot; STAT_UNKNOWN &quot;. کلمه &quot;SELF&quot; (در تمام کلاه ها) برای این گروه قابل استفاده است (به عنوان مثال &quot;SELF: service&quot;) ، و مخفف اختصاری برای گروه ساعت فعلی است. <P style=";text-align:right;direction:rtl"> این ویژگی می تواند برای کنترل هشدارها برای سرویس هایی که به سایر خدمات وابسته هستند ، استفاده شود ، به عنوان مثال تست SMTP که به دستگاه قابل دسترسی پینگ بستگی دارد. <P style=";text-align:right;direction:rtl"><DT> <B>dep_behaviour</b> <I>{a | m</i> <DD> ارزیابی نمودارهای وابستگی می تواند سرکوب هشدارها را کنترل کند یا مانیتور را کنترل کند. <P style=";text-align:right;direction:rtl"> <B>سرکوب هشدار</b> . اگر این گزینه بر روی &quot;a&quot; تنظیم شود ، پس از خروج مانیتور برای خروج از سرویس یا پس از دریافت تله ، میزان بیان وابستگی ارزیابی می شود. در صورت موفقیت آمیز ارزیابی ، هشدار ارسال می شود ، به این معنی که هیچ یک از گره های موجود در نمودار وابستگی نشانگر عدم موفقیت نیستند. <P style=";text-align:right;direction:rtl"> <B>نظارت بر سرکوب</b> اگر روی &quot;m&quot; تنظیم شده باشد ، قبل از شروع به کار مانیتور برای سرویس ، عبارت وابستگی حذف می شود. اگر تخلیه موفقیت آمیز باشد ، مانیتور اجرا می شود. در غیر این صورت ، مانیتور اجرا نمی شود و وضعیت سرویس همچنان باقی می ماند. <P style=";text-align:right;direction:rtl"></DL><A NAME="lbAO">&nbsp;</A><H3 style=";text-align:right;direction:rtl"> تعاریف دوره </H3><P style=";text-align:right;direction:rtl"> دوره ها برای تعریف شرایطی استفاده می شود که باید تحویل داده شود. <P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <B>period</b> <I>[label:] periodspec</i> <DD> یک دوره یک یا چند آلارم و متغیر را گروه بندی می کند که کنترل می کند که در صورت خرابی ، هشدار چقدر اتفاق می افتد. کلمه کلیدی <B>دوره</b> دارای دو شکل است. اولین استدلال طول می کشد که مشخصات دوره ای از ماژول Time Patrick Ryan :: Period Perl 5 است. برای اطلاعات بیشتر به &quot;زمان پرلدوک :: دوره&quot; مراجعه کنید. <P style=";text-align:right;direction:rtl"> فرم دوم به یک برچسب نیاز دارد که به شرح زیر مربوط به یک دوره است. برچسب برچسب متشکل از یک حروف الفبا یا زیربنای است که به دنبال آن صفر یا بیشتر الفبایی یا زیرنویس ها و پایان دادن به روده بزرگ است. این فرم اجازه می دهد تا چندین دوره با تعریف دوره مشابه. یک استفاده شده است به یک تعریف دوره است که هیچ <B>alertafter</b> یا <B>alertevery</b> پارامترها برای یک دوره زمانی خاص، و دیگری برای همان دوره زمانی با مجموعه ای متفاوت از هشدار که حاوی این پارامترها. <P style=";text-align:right;direction:rtl"><DT> <B>بازه</b> <I>زمانی هشدار</i> <DD> کلمه کلیدی <B>alertevery</b> (در یک تعریف <B>دوره</b> ) همان نوع آرگومان را به عنوان متغیر <B>فاصله می گیرد</b> و تعداد دفعات ارسال هشدار در هنگام عدم موفقیت سرویس را محدود می کند. به عنوان مثال ، اگر فاصله &quot;1 ساعت&quot; باشد ، فقط هشدارهای بخش دوره فقط هر ساعت یک بار شروع می شوند. اگر کلمه کلیدی <B>alerte</b> در یک ورود به دوره حذف شود ، هربار شناسایی یک خرابی هشدار ارسال می شود. به طور پیش فرض ، اگر خروجی دو شکست پی در پی تغییر کند ، بازه فاصله هشدار بیش از حد است. اگر کلمه &quot;خلاصه&quot; آخرین آرگومان باشد ، در مقایسه با بازده خرابی های پی در پی ، فقط خطوط خروجی خلاصه در نظر گرفته می شود. <P style=";text-align:right;direction:rtl"><DT> <B>alertafter</b> <I>NUM</i> <DD><P style=";text-align:right;direction:rtl"><DT> <B>فاصله</b> <I>زمانی شماره اعلان</i> <DD> کلمه کلیدی <B>alertafter</b> (در یک بخش <B>دوره</b> ) دارای دو شکل است: فقط با آرگومان &quot;num&quot; یا با آرگومان &quot;num timeval&quot;. در فرم اول ، هشدار فقط پس از شکست های متوالی &quot;شماره&quot; فراخوانی می شود. <P style=";text-align:right;direction:rtl"> در فرم دوم ، آرگومان ها یک عدد صحیح مثبت هستند که به دنبال آن یک بازه ، همانطور که توسط متغیر <B>فاصله زمانی</b> بالا توضیح داده شده است. اگر این پارامترها مشخص شوند ، هشدارهای مربوط به آن دوره فقط پس از آن فراخوانی می شوند که بسیاری از خرابی ها در آن بازه اتفاق می افتد. به عنوان مثال ، اگر آرگومان &quot;3 30m&quot; به <B>اعلان اعتیاد</b> داده شود ، اگر 3 خرابی در 30 دقیقه رخ دهد ، هشدار فراخوانی می شود. <P style=";text-align:right;direction:rtl"><DT> <B>numalerts</b> <I>NUM</i> <DD><P style=";text-align:right;direction:rtl"> این متغیر می گوید سرور به پاسخ بیش از <I>NUM</i> هشدار در صورت قطع. پیشخوان هشدار به صورت دوره ای در هر دوره نگه داشته می شود و بر روی هر موفقیتی تنظیم مجدد می شود. <P style=";text-align:right;direction:rtl"><DT> <B>comp_alerts</b> <DD><P style=";text-align:right;direction:rtl"> اگر این گزینه مشخص شده باشد ، در صورت فراخوانی هشدار مربوط به &quot;پایین&quot; ، به upalerts فراخوانی می شود. <P style=";text-align:right;direction:rtl"><DT> <B>هشدار</b> <I>هشدار [بحث ...]</i> <DD> یک دوره ممکن است شامل چندین هشدار باشد که در صورت عدم موفقیت سرویس ایجاد می شوند. هشدار با کلمه کلیدی <B>هشدار</b> مشخص شده است ، و پس از آن یک پارامتر <B>خروجی</b> اختیاری ، و آرگومان هایی که همان تعریف <B>مانیتور</b> تعبیر می شوند ، اما بدون &quot;؛؛&quot; استثنا. پارامتر <B>خروجی</b> به صورت <B>خروجی = x</b> یا <B>dalse = xy می باشد</b> و به این معنی است که هشدار فقط در صورتی گفته می شود که وضعیت خروج اسکریپت مانیتور در محدوده پارامتر <B>خروجی</b> باشد. به عنوان مثال ، اگر خط <I>هشدار از حالت هشدار خارج است = 10-20 mail.alert mis</i> <I>، هشدار از طریق نامه</i> فقط با <I>اشتباه</i> به عنوان استدلال آن فراخوانی می <I>شود</i> اگر مقدار خروجی برنامه مانیتور بین 10 تا 20 باشد. این ویژگی به شما امکان می دهد هشدارهای مختلف در سطح شدتهای مختلف (مانند وقتی فضای دیسک رایگان از 8٪ به 3٪ می رود). <P style=";text-align:right;direction:rtl"> برای دیدن لیستی از نمایشگر پیش نمایشگر به طور خودکار به برنامه های هشدار ، به قسمت <B>ALERT PROGRAMS</b> مراجعه کنید. <P style=";text-align:right;direction:rtl"><DT> <I>هشدار</i> <B>upalert</b> <I>[بحث ...]</i> <DD> <B>فراز و نشیب</b> تعارف <B>هشدار است</b> . هنگامی که یک سرویس باعث می شود دولت از عدم موفقیت به موفقیت منتقل شود ، اعزام کننده نامیده می شود. اسکریپت <B>upalert</b> به تهیه همان پارامترهای همان اسکریپت <B>هشدار</b> ، با اضافه کردن پارامتر <B>-u</b> که به سادگی برای اطلاع از یک اسکریپت هشدار می شناسد که به عنوان upalert خوانده می شود ، گفته می شود. ممکن است برای هر تعریف دوره ، تعداد ارتقا های چندگانه مشخص شود. لطفاً توجه داشته باشید که رفتار پیش فرض این است که اعلان کننده بدون در نظر گرفتن هشدارهای قبلی &quot;پایین&quot; ارسال می شوند ، از آنجا که اعزام ها به انتقال دولت انجام می شوند ، ارسال می شود. گزینه <B>per_</b> period <B>comp_alerts</b> را <B>تنظیم</b> کنید تا هشدارهای مربوط به موارد زیر را با هشدارهای &quot;پایین&quot; جفت کنید. <P style=";text-align:right;direction:rtl"><DT> <I>هشدار</i> <B>startupalert</b> <I>[بحث ...]</i> <DD> راه <B>اندازی</b> فقط هنگام شروع سرور <B>mon</b> اجرا می شود. <P style=";text-align:right;direction:rtl"><DT> <B>بازه</b> <I>زمانی</i> <B>بالاترین</b> <I>سرعت</i> <DD> پارامتر <B>upalertafter</b> به عنوان یک رشته مشخص می شود که از نحو پارامتر <B>فاصله</b> (&quot;30s&quot; ، &quot;1m&quot; و غیره) <B>پیروی می</b> کند و برانگیختگی یک <B>upalert را کنترل می کند</b> . اگر یک سرویس پس از پایین آمدن برای مدتی بیشتر از یا مساوی با ارزش این گزینه ، <B>برگشت داده</b> شود ، به <B>مسئولیت رسیدگی</b> می شود. از این گزینه برای جلوگیری از اینکه به دلیل &quot;تاول زدگی&quot; (خاموشی مختصر) نامیده شود ، از این امر جلوگیری کنید. <P style=";text-align:right;direction:rtl">