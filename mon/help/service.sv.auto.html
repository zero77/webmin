<header> MON Hjälp för servicedefinitioner </header><p> Detta är det andra och sista steget för MON-konfiguration. <p> Standardvärden visas för obligatoriska tjänster <marked in RED color> . Se respektive hjälpämne nedan för mer hjälp om servicedefinitionerna. <p> För <b>&quot;mail.alert&quot;</b> , se till att sendmail är konfigurerat och <b>&quot;sendmail&quot;</b> deamon startas på värdmaskinen. <H3> Servicedefinitioner </H3><P><DL COMPACT><DT> <B><I>tjänsteSERVICE</i></b> <DD> En definition tjänsten börjar med de sökord <B>tjänst</b> följt av ett ord som är taggen för den här tjänsten. <P> Komponenterna i en tjänst är ett intervall-, bildskärms- och en eller flera tidsperioddefinitioner, enligt definitionen nedan. <P> Om ett servicenamn för &quot;standard&quot; definieras i en klockgrupp som kallas &quot;dafault&quot; (se ovan), kommer standard / standarddefinitionen att användas för att hantera okända mon-fällor. <P><DT> <B>intervallet</b> <I>TimeVal</i> <DD> Sökordet <B>intervall</b> följt av ett tidsvärde specificerar frekvensen med vilken skärmen skript kommer att utlösas. Tidsvärden definieras som &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot; eller &quot;1d&quot;, vilket betyder 30 sekunder, 5 minuter, 1 timme eller 1 dag. Den numeriska delen kan vara en bråkdel, såsom &quot;1,5 timmar&quot; eller en och en halv timme. Detta format av en tidsspecifikation kommer att kallas <I>tidslängd</i> . <P><DT> <B>tid för</b> <I>traptimeout</i> <DD> Detta sökord tar samtidigt specifikationen argument som <B>intervall</b> <I>och</i> gör tjänsten förväntar sig en fälla från en extern källa åtminstone så ofta, annars ett misslyckande kommer att registreras. Detta används för en hjärtslagstjänst. <P><DT> <B>trapduration</b> <I>TimeVal</i> <DD> Om en fälla tas emot kommer statusen för tjänsten till vilken fällan levererades normalt att vara konstant. Om <B>trapduration</b> anges kommer statusen för tjänsten att förbli i ett misslyckat <I>läge</i> under den tid som anges av <I>tidsperioden</i> , och återställs sedan till &quot;framgång&quot;. <P><DT> <B>randskew</b> <I>timeval</i> <DD> I stället för att schemalägga monitorskriptet så att det körs i början av varje intervall, justerar du slumpmässigt intervallet som anges av <B>intervallparametern</b> med plus-eller-minus <B>randskew.</b> Skevvärdet anges som <B>intervallparametern</b> : &quot;30s&quot;, &quot;5m&quot;, osv ... Till exempel om <B>intervallet</b> är 1m, och <B>randskew</b> är &quot;5s&quot;, kommer <I>mon</i> att schemalägga monitorns skript en stund mellan var 55: e sekund och 65 sekunder. Avsikten är att hjälpa till att fördela belastningen på servern när många tjänster är schemalagda med samma intervall. <P><DT> <B>monitor</b> <I>monitor-name [arg ...]</i> <DD> Nyckelordet <B>monitor</b> följt av en skriptnamn och argument Anger bildskärmen för att köras när timern löper ut. Shell-liknande citatkonventioner följs när du specificerar argumenten som ska skickas till monitorskriptet. Skriptet anropas från katalogen som ges med <B>-s-</b> argumentet, och alla följande ord tillhandahålls som argument till monitorprogrammet, följt av listan med värdar i gruppen som den aktuella vakgruppen hänvisar till. Om monitorlinjen slutar med &quot;;;&quot; som ett separat ord läggs värdgrupperna inte till argumentlistan när programmet startas. <P><DT> <B>allow_empty_group</b> <DD> <B>Alternativet allow_empty_group</b> tillåter en skärm att anropas även när värdgruppen för den klockan är tom på grund av inaktiverade värdar. Standardbeteendet är inte att åberopa bildskärmen när alla värdar i en värdgrupp har inaktiverats. <P><DT> <B>beskrivning</b> <I>beskrivningstext</i> <DD> Texten som följer <B>beskrivningen</b> fråges av klientprogram, skickas till varningar och monitorer via en miljövariabel. Den ska innehålla en kort beskrivning av tjänsten, lämplig för införande i ett e-postmeddelande eller på en webbsida. <P><DT> <B>exclude_hosts</b> <I>host [host ...]</i> <DD> Alla värdar som anges efter <B>exclude_hosts</b> kommer att uteslutas från servicekontrollen. <P><DT> <B>uteslut_period</b> <I>periodspec</i> <DD> Kör inte en schemalagd bildskärm under den tid som identifierats av <I>periodspec</i> . <P><DT> <B>beror på</b> <I>beroende</i> <DD> Det <B>beroende</b> nyckelordet används för att specificera ett beroendeuttryck, som utvärderas till antingen sant för falskt, i booleska mening. Beroende är faktiska Perl-uttryck och måste följa alla syntaktiska regler. Uttryck utvärderas i sitt eget paketutrymme för att inte av misstag ha någon oönskad biverkning. Om ett syntaxfel hittas vid utvärderingen av uttrycket, loggas det via syslog. <P> Innan utvärdering sker följande ersättningar på uttrycket: fraser som ser ut som &quot;grupp: tjänst&quot; ersätts med värdet på den aktuella driftsstatusen för den angivna tjänsten. Dessa startersubstitutioner beräknas rekursivt, så om tjänst A beror på tjänst B, och tjänst B beror på tjänst C, beror service A på tjänst C. Framgångsrika driftstatus (som utvärderar till &quot;1&quot;) är &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;och&quot; STAT_UNKNOWN &quot;. Ordet &quot;SELF&quot; (i alla kepsar) kan användas för gruppen (t.ex. &quot;SELF: service&quot;) och är en förkortning för den aktuella klockgruppen. <P> Den här funktionen kan användas för att kontrollera varningar för tjänster som är beroende av andra tjänster, t.ex. ett SMTP-test som är beroende av att maskinen kan nås via ping. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Utvärderingen av beroendegrafer kan kontrollera undertrycket av antingen varning eller övervaka invokationer. <P> <B>Undertryck av varning</b> . Om detta alternativ är inställt på &quot;a&quot;, kommer beroendeuttrycket att utvärderas efter att monitorn för tjänsten har gått ut eller efter att en fälla har tagits emot. En varning kommer endast att skickas om utvärderingen lyckas, vilket innebär att ingen av noderna i beroendegrafen indikerar fel. <P> <B>Övervaka undertryckning</b> . Om det är inställt på &quot;m&quot;, kommer beroendeuttrycket att undvikas innan monitorn för tjänsten håller på att köras. Om utrymningen lyckas kommer monitorn att köras. Annars körs inte monitorn och statusen för tjänsten förblir densamma. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Perioddefinitioner </H3><P> Perioder används för att definiera villkoren som ska göra det möjligt att leverera varningar. <P><DL COMPACT><DT> <B>period</b> <I>[label:] periodspec</i> <DD> En period grupperar en eller flera larm och variabler som styr hur ofta en varning sker när det är ett fel. <B>Perioden</b> sökord har två former. Den första tar ett argument som är en periodspecifikation från Patrick Ryan&#39;s Time :: Period Perl 5-modul. Se &quot;perldoc Time :: Period&quot; för mer information. <P> Den andra formen kräver en etikett följt av en periodspecifikation, enligt definitionen ovan. Etiketten är en tagg som består av ett alfabetiskt tecken eller understreck följt av noll eller fler alfanumeriska eller understreck och slutar med en kolon. Denna form tillåter flera perioder med samma perioddefinition. En användning är att ha en perioddefinition som inte har några parametrar för <B>förändring</b> eller <B>förändring</b> för en viss tidsperiod, och en annan för samma tidsperiod med en annan uppsättning varningar som innehåller dessa parametrar. <P><DT> <B>alertevery</b> <I>tid</i> <DD> Den <B>alertevery</b> nyckelordet (inom en definition <B>period)</b> tar samma typ av argument som <B>intervallet</b> variabel, och begränsar det antal gånger en varning skickas när tjänsten fortsätter att misslyckas. Till exempel, om intervallet är &quot;1h&quot;, kommer bara varningarna i periodavsnittet bara att triggas en gång i timmen. Om sökordet <B>alertevery</b> utelämnas i en <B>periodpost</b> skickas en varning varje gång ett fel upptäcks. Som standard, om utgången från två på varandra följande fel ändras, åsidosätts alertevery-intervallet. Om ordet &quot;sammanfattning&quot; är det sista argumentet kommer endast de sammanfattande utmatningslinjerna att beaktas när man jämför resultat från successiva fel. <P><DT> <B>alertafter</b> <I>num</i> <DD><P><DT> <B>alertafter</b> <I>num timeval</i> <DD> Den <B>alertafter</b> sökord (inom en <B>period</b> avsnitt) har två former: endast med &quot;num&quot; argument, eller med &quot;num TimeVal&quot; argument. I den första formen kommer en varning endast att åberopas efter &quot;num&quot; i följd av fel. <P> I den andra formen är argumenten ett positivt heltal följt av ett intervall, som beskrivs av <B>intervallvariabeln</b> ovan. Om dessa parametrar specificeras kommer larm för den perioden endast att anropas efter att många fel inträffar inom det intervallet. Till exempel, om <B>alertafter</b> ges argumenten &quot;3 30m&quot;, då varningen kommer att kallas om 3 fel händer inom 30 minuter. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Denna variabel säger servern att ringa mer än <I>numvarningar</i> under ett fel. Alarmsräknaren hålls per period och återställs vid varje framgång. <P><DT> <B>comp_alerts</b> <DD><P> Om det här alternativet anges, kommer uppgraderingar endast att ringas om en motsvarande &quot;ned&quot; -alarm har anropats. <P><DT> <B>alarm</b> <I>alert [arg ...]</i> <DD> En period kan innehålla flera varningar som utlöses när tjänsten misslyckas. En varning specificeras med <B>varningssökordet</b> , följt av en valfri <B>utgångsparameter</b> , och argument som tolkas på samma sätt som <B>bildskärmsdefinitionen</b> , men utan &quot;;;&quot; undantag. <B>Utgångsparametern</b> har formen <B>exit = x</b> eller <B>exit = xy</b> och påverkar att varningen endast anropas om utgångsstatusen för monitorskriptet ligger inom intervallet för <B>utgångsparametern</b> . Om till exempel varningslinjen är <I>alarm exit = 10-20 mail.alert mis</i> kommer <I>e-postvarning</i> endast att åberopas med <I>mis</i> som dess argument om monitorprogrammets utgångsvärde är mellan 10 och 20. Denna funktion låter dig trigga olika varningar med olika svårighetsnivåer (som när ledigt diskutrymme går från 8% till 3%). <P> Se avsnittet <B>ALERT PROGRAM</b> ovan för en lista över prametrarna som mon automatiskt kommer att skickas till varningsprogram. <P><DT> <B>uppalert</b> <I>varning [arg ...]</i> <DD> En <B>upalert</b> är komplimentet av en <B>varning</b> . En upalert kallas när en tjänst gör staten övergången från misslyckande till framgång. <B>Upalert-</b> skriptet kallas att tillhandahålla samma parametrar som <B>varningsskriptet</b> , med tillägget av <B>-u-</b> parametern som helt enkelt används för att låta ett varningsskript veta att det kallas som ett upalert. Flera uppgraderingar kan anges för varje perioddefinition. Observera att standardbeteendet är att en upalert kommer att skickas oavsett om det fanns några tidigare &quot;down&quot; -varningar, eftersom upalerts utlöses vid en statlig övergång. Ställ in per- <B>periodalternativet comp_alerts för</b> att para ihop uppdateringar med &quot;ned&quot; -varningar. <P><DT> <B>startupalert</b> <I>alert [arg ...]</i> <DD> En <B>startupalert anropas</b> endast när <B>mon-</b> servern startar körningen. <P><DT> <B>uppåt efter</b> <I>tiden</i> <DD> Parametern <B>upalertafter</b> anges som en sträng som följer syntaxen för <B>intervallparametern</b> (&quot;30s&quot;, &quot;1m&quot;, etc.) och styr utlösningen av en <B>upalert</b> . Om en tjänst kommer upp igen efter att ha varit nere i en tid som är större än eller lika med värdet på detta alternativ, kommer en <B>upalert</b> att <B>ringas</b> . Använd det här alternativet för att förhindra att uppringningar kallas på grund av &quot;blips&quot; (korta avbrott). <P>