<header> MON-hulp vir diensdefinisies </header><p> Dit is die tweede en laaste fase vir MON-opstelling. <p> Standaardwaardes word getoon vir die verpligte dienste <marked in RED color> . Raadpleeg die onderskeie hulponderwerpe hieronder vir meer inligting oor die Diensdefinisies. <p> Vir <b>&quot;mail.alert&quot;</b> , maak seker dat die sendmail gekonfigureer is en dat <b>&quot;sendmail&quot;</b> -deamon op die hostmachine begin word. <H3> Diensdefinisies </H3><P><DL COMPACT><DT> <B>diens</b> <I>diensnaam</i> <DD> &#39;N Diensdefinisie begin met die trefwoord <B>diens</b> gevolg deur &#39;n woord wat die tag vir hierdie diens is. <P> Die komponente van &#39;n diens is &#39;n definisie van intervalle, monitore en een of meer tydperke, soos hieronder gedefinieer. <P> As &#39;n diensnaam van &quot;standaard&quot; binne &#39;n horlosiegroep met die naam &quot;dafault&quot; gedefinieër word (sien hierbo), sal die standaard- / standaarddefinisie gebruik word vir die hantering van onbekende mon-traps. <P><DT> <B>interval</b> <I>tydsduur</i> <DD> Die navraag <B>interval</b> gevolg deur &#39;n tyd waarde spesifiseer die frekwensie wat &#39;n monitor script sal veroorsaak. Tydwaardes word gedefinieer as &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot;, of &quot;1d&quot;, wat beteken dat dit 30 sekondes, 5 minute, 1 uur of 1 dag is. Die numeriese gedeelte kan &#39;n breuk wees, soos &quot;1,5 uur&quot; of &#39;n half uur. Daar word na hierdie formaat van &#39;n <I>tydspesifikasie</i> verwys as <I>tydsduur</i> . <P><DT> <B>traptimeout</b> <I>tydsduur</i> <DD> Hierdie trefwoord neem dieselfde tydspesifikasie-argument as <B>interval</b> <I>,</i> en laat die diens ten minste so dikwels &#39;n lokval van &#39;n eksterne bron verwag, anders sal &#39;n mislukking geregistreer word. Dit word gebruik vir &#39;n hartklop-diens. <P><DT> <B>trapduration</b> <I>tydsduur</i> <DD> As &#39;n lokval ontvang word, sal die status van die diens waaraan die lokval gelewer is, normaalweg konstant bly. As <B>trapduration</b> gespesifiseer, sal die status van die diens in &#39;n mislukking staat bly vir die duur wat deur <I>timeval,</i> en dan sal dit herstel na &quot;sukses&quot; te wees. <P><DT> <B>randskew</b> <I>tydsduur</i> <DD> Eerder as om die monitorskrip te skeduleer om aan die begin van elke interval te loop, moet u die interval wat deur die <B>intervalparameter</b> gespesifiseer word, willekeurig aanpas deur plus-of-minus- <B>randskew.</b> Die skewe waarde word gespesifiseer as die <B>interval</b> parameter: &quot;30s&quot;, &quot;5m&quot;, ens ... Byvoorbeeld, as <B>interval</b> 1m is, en <B>randskew</b> is &quot;5s&quot;, sal <I>mon</i> die skrip &#39;n tyd tussen elke 55 sekondes skeduleer en 65 sekondes. Die bedoeling is om die las op die bediener te help versprei wanneer baie dienste met dieselfde tussenposes geskeduleer word. <P><DT> <B>monitor</b> <I>monitor-naam [arg ...]</i> <DD> Die navraag <B>monitor</b> gevolg deur &#39;n script naam en argumente spesifiseer die monitor uit te voer wanneer die timer verstryk. Shell-agtige aanhalingskonvensies word gevolg wanneer die argumente gespesifiseer word om na die monitorskrip te stuur. Die skrip word van die gids met die <B>-s-</b> argument gebruik, en alle volgende woorde word as argumente aan die monitorprogram gelewer, gevolg deur die lys van leërskare in die groep waarna die huidige kykgroep verwys. As die monitorlyn eindig met &quot;;;&quot; as &#39;n aparte woord, word die gasheergroepe nie by die argumente-lys gevoeg as die program opgeroep word nie. <P><DT> <B>allow_empty_group</b> <DD> Met die opsie <B>allow_empty_group</b> kan &#39;n monitor ingeroep word, selfs as die gasheergroep vir daardie horlosie leeg is weens gestremde gashere. Die standaardgedrag is om die monitor nie aan te wend as alle gashere in &#39;n gasheergroep gedeaktiveer is nie. <P><DT> <B>beskrywing</b> <I>beskrywingsteks</i> <DD> Die volgende <B>teksbeskrywing</b> word uitgevra deur kliëntprogramme, aan &#39;n waarskuwing gestuur en monitor via &#39;n omgewingsveranderlike. Dit moet &#39;n kort beskrywing van die diens bevat, geskik vir insluiting in &#39;n e-pos of op &#39;n webblad. <P><DT> <B>uitsluit_hosts</b> <I>host [host ...]</i> <DD> Enige gashere wat na <B>eksklusiewe_hoste</b> gelys word, sal uitgesluit word van die diensondersoek. <P><DT> <B>sluit_periode periode</b> <I>spesifiseer</i> <DD> Moenie &#39;n geskeduleerde monitor bestuur gedurende die tyd wat deur <I>periodspec</i> geïdentifiseer is nie. <P><DT> <B>hang af van</b> <I>afhanklikheid</i> <DD> Die <B>afhanklike</b> sleutelwoord word gebruik om &#39;n afhanklikheidsuitdrukking, wat beoordeel word as waar of vals, in die Boole sin te spesifiseer. Afhanklikheid is werklike Perl-uitdrukkings, en moet alle sintaktiese reëls nakom. Die uitdrukkings word in hul eie pakketruimte beoordeel om nie per ongeluk &#39;n ongewenste newe-effek te hê nie. As &#39;n sintaksfout gevind word by die evaluering van die uitdrukking, word dit via syslog aangeteken. <P> Voor evaluering vind die volgende vervangings oor die uitdrukking plaas: frases wat soos &quot;groep: diens&quot; lyk, word vervang met die waarde van die huidige bedryfsstatus van die spesifieke diens. Hierdie opstatus-substitusies word rekursief bereken, dus as diens A afhang van diens B, en diens B afhang van diens C, dan is diens A afhanklik van diens C. Suksesvolle operasionele status (wat beoordeel word na &quot;1&quot;) is &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;, en&quot; STAT_UNKNOWN &quot;. Die woord &quot;SELF&quot; (in alle pette) kan vir die groep gebruik word (bv. &quot;SELF: diens&quot;), en is &#39;n afkorting vir die huidige kykgroep. <P> Hierdie funksie kan gebruik word om waarskuwings te beheer vir dienste wat afhanklik is van ander dienste, byvoorbeeld &#39;n SMTP-toets wat afhanklik is van die ping-bereikbare masjien. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Die evaluering van afhanklikheidsgrafieke kan die onderdrukking van waarskuwings of oproepe monitor. <P> <B>Waarskuwing onderdrukking</b> . As hierdie opsie op &quot;a&quot; gestel is, sal die afhanklikheidsuitdrukking geëvalueer word na die monitor vir die diensuitgange of nadat &#39;n lokval ontvang is. &#39;N Alert sal slegs gestuur word as die evaluering slaag, wat beteken dat geen van die nodusse in die afhanklikheidsgrafiek op mislukking dui nie. <P> <B>Monitor onderdrukking</b> . As dit op &quot;m&quot; is, sal die afhanklikheidsuitdrukking ontwyk word voordat die monitor vir die diens op die punt staan om te loop. As die ontwyking slaag, sal die monitor uitgevoer word. Andersins sal die monitor nie uitgevoer word nie en die status van die diens bly dieselfde. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Periode Definisies </H3><P> Periodes word gebruik om die voorwaardes te definieer wat moet voorsiening maak vir waarskuwings. <P><DL COMPACT><DT> <B>periode</b> <I>[etiket:] periodspec</i> <DD> &#39;N Periode groepeer een of meer alarms en veranderlikes wat bepaal hoe gereeld &#39;n waarskuwing plaasvind wanneer daar fout is. Die <B>periode-</b> sleutelwoord het twee vorme. Die eerste voer &#39;n argument aan, wat &#39;n periode-spesifikasie is uit die module Patrick Ryan se Tyd :: Perl 5-periode. Raadpleeg &quot;Perldoc Time :: Period&quot; vir meer inligting. <P> Die tweede vorm benodig &#39;n etiket gevolg deur &#39;n periode-spesifikasie, soos hierbo omskryf. Die etiket is &#39;n etiket wat bestaan uit &#39;n alfabetiese karakter of onderstreep gevolg deur nul of meer alfanumerieke of onderstreep en eindig met &#39;n dikderm. Hierdie vorm laat verskeie periodes toe met dieselfde definisie. Een gebruik is om &#39;n definisie van &#39;n periode te hê wat geen <B>parameter</b> of <B>altervery</b> vir &#39;n spesifieke periode het nie, en &#39;n ander vir dieselfde periode met &#39;n ander stel waarskuwings wat hierdie parameters bevat. <P><DT> <B>alertevery</b> <I>tydsduur</i> <DD> Die <B>alertevery-</b> sleutelwoord (binne &#39;n <B>periode-</b> definisie) neem dieselfde argument as die <B>intervalveranderlike</b> en beperk die aantal kere wat &#39;n waarskuwing gestuur word wanneer die diens aanhou misluk. Byvoorbeeld, as die interval &quot;1 uur&quot; is, word slegs die waarskuwings in die periode-afdeling slegs een keer per uur geaktiveer. As die <B>alertevery</b> navraag is weggelaat in &#39;n tydperk inskrywing, sal &#39;n waarskuwing uitgestuur word elke keer as &#39;n mislukking bespeur. As die uitset van twee opeenvolgende mislukkings verander, word die alertevery-interval standaard gekanselleer. As die woord &quot;opsomming&quot; die laaste argument is, sal slegs die opsommende uitsetlyne oorweeg word wanneer die uitsette van opeenvolgende mislukkings vergelyk word. <P><DT> <B>alertafter</b> <I>num</i> <DD><P><DT> <B>altertafter</b> <I>num tydelike</i> <DD> Die <B>altertafter</b> trefwoord (binne &#39;n <B>periode-</b> afdeling) het twee vorme: slegs met die &quot;num&quot; -argument, of met die &quot;num timeval&quot; -argumente. In die eerste vorm sal &#39;n waarskuwing slegs opgeroep word na &#39;n &#39;opeenvolgende mislukking. <P> In die tweede vorm is die argumente &#39;n positiewe heelgetal, gevolg deur &#39;n interval, soos beskryf deur die <B>intervalveranderlike</b> hierbo. As hierdie parameters gespesifiseer word, word die waarskuwings vir daardie periode eers geroep nadat baie foute binne daardie interval plaasgevind het. Byvoorbeeld, as die argumente &quot;3 30m&quot; <B>altertaar</b> gegee word, word die waarskuwing geroep as 3 foute binne 30 minute voorkom. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Hierdie veranderlike sê vir die bediener om nie meer as &#39;n <I>aantal</i> waarskuwings te skakel tydens &#39;n mislukking nie. Die waarskuwingstoonbank word op &#39;n periodieke basis gehou en word op elke sukses teruggestel. <P><DT> <B>comp_alerts</b> <DD><P> As hierdie opsie gespesifiseer word, word opheffings slegs geskakel as &#39;n ooreenstemmende &quot;af&quot; -waarskuwing genoem is. <P><DT> <B>alarm</b> <I>alert [arg ...]</i> <DD> &#39;N Tydperk kan veelvuldige waarskuwings bevat wat geaktiveer word as die diens misluk. &#39;N Waarskuwing word gespesifiseer met die <B>waarskuwingstabel</b> , gevolg deur &#39;n opsionele <B>uitgangsparmeter</b> , en argumente wat dieselfde geïnterpreteer word as die definisie van die <B>monitor</b> , maar sonder die&#39; ;; uitsondering nie. Die <B>uitgangsparameter</b> vorm die vorm van <B>uitgang = x</b> of <B>uitgang = xy</b> en het tot gevolg dat die waarskuwing slegs geskakel word as die uitgangstatus van die monitorskrip binne die omvang van die <B>uitgangsparameter val</b> . As die waarskuwingslyn byvoorbeeld <I>uitgang = 10-20</i> <I>e-pos is. Alert</i> <I>mis,</i> dan word <I>e-pos waarskuwing</i> slegs met <I>mis gebruik</i> as argumente as die <I>uitgangswaarde van die monitorprogram</i> tussen 10 en 20 is. Met hierdie funksie kan u verskillende waarskuwings op verskillende ernsvlakke (soos wanneer die vrye skyfruimte van 8% tot 3% gaan). <P> Raadpleeg die afdeling <B>ALERT PROGRAMME</b> hierbo vir &#39;n lys van die voorlopers wat outomaties oorgedra word om programme te waarsku. <P><DT> <B>opwaartse</b> <I>waarskuwing [arg ...]</i> <DD> &#39;N <B>Upalert</b> is die kompliment van &#39;n <B>waarskuwing</b> . &#39;N Upalert word genoem wanneer dienste deur die staat oorgegaan word van mislukking tot sukses. Die <B>upalert-</b> skrip word genoem met die verskaffing van dieselfde parameters as die <B>waarskuwingskrip</b> , met die toevoeging van die <B>-u-</b> parameter wat eenvoudig gebruik word om &#39;n waarskuwingsskrip te laat weet dat dit &#39;n upalert genoem word. Daar kan verskillende opwaarderings vir elke periode-definisie gespesifiseer word. Let daarop dat die standaardgedrag is dat &#39;n upalert gestuur sal word ongeag of daar voorafgaande &quot;down&quot; -waarskuwings gestuur is, aangesien upalerts tydens &#39;n toestandoorgang veroorsaak word. Stel die opsie per periode <B>periodieke comp_alerts</b> in om upalerts te koppel met &#39;down&#39; waarskuwings. <P><DT> <B>startupalert</b> <I>waarskuwing [arg ...]</i> <DD> &#39;N <B>Startupalert</b> word slegs <B>geskakel</b> as die <B>mon-</b> bediener met die uitvoering begin. <P><DT> <B>upalertafter</b> <I>tydsduur</i> <DD> Die <B>upalertafter-</b> parameter word gespesifiseer as &#39;n string wat die sintaksis van die <B>intervalparameter volg</b> (&quot;30s&quot;, &quot;1m&quot;, ens.) En beheer die <B>aktivering</b> van &#39;n <B>upalert</b> . As &#39;n diens terugkom na &#39;n tyd wat groter is as of gelyk aan die waarde van hierdie opsie, word &#39;n <B>opwaartse</b> oproep geroep. Gebruik hierdie opsie om te voorkom dat opknappings weens &#39;blips&#39; (kort onderbrekings) genoem word. <P>