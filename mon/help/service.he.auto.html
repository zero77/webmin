<header> MON עזרה בהגדרות השירות </header><p style=";text-align:right;direction:rtl"> זהו השלב השני והאחרון לתצורת MON. <p style=";text-align:right;direction:rtl"> ערכי ברירת מחדל מוצגים עבור שירותי החובה <marked in RED color> . עיין בנושא העזרה המתאים להלן לקבלת עזרה נוספת בנושא הגדרות השירות. <p style=";text-align:right;direction:rtl"> עבור <b>&quot;mail.alert&quot;</b> , ודא <b>שהגדרת</b> ה- sendmail מוגדרת והפעלה של <b>&quot;sendmail&quot;</b> מופעלת במכונה המארחת. <H3 style=";text-align:right;direction:rtl"> הגדרות שירות </H3><P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <B>שירות</b> <I>SERVICENAME</i> <DD> הגדרת שירות מתחילה <B>בשירות</b> מילות המפתח שלהם ואחריה מילה שהיא התג של שירות זה. <P style=";text-align:right;direction:rtl"> מרכיבי השירות הינם הגדרות מרווח, צג והגדרת תקופת זמן אחת או יותר, כהגדרתן להלן. <P style=";text-align:right;direction:rtl"> אם מוגדר שם שירות של &quot;ברירת מחדל&quot; בקבוצת שעונים הנקראת &quot;דאפא&quot; (ראה לעיל), הגדרת ברירת המחדל / ברירת המחדל תשמש לטיפול במלכודות mon לא ידועות. <P style=";text-align:right;direction:rtl"><DT> <B>מרווח</b> <I>timeval</i> <DD> <B>מרווח</b> מילות המפתח ואחריו ערך זמן מציין את התדירות בה יופעל סקריפט צג. ערכי זמן מוגדרים &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot;, או &quot;1d&quot;, כלומר 30 שניות, 5 דקות, שעה או יום אחד. החלק המספרי עשוי להיות שבריר, כגון &quot;1.5h&quot; או שעה וחצי. תבנית זו של מפרט זמן יהיה המכונה <I>timeval.</i> <P style=";text-align:right;direction:rtl"><DT> <B>זמן זמן</b> <I>טרפטיים</i> <DD> מילת מפתח זו אורכת טיעון מפרט זמן זהה <B>למרווח זמן</b> <I>,</i> וגורמת לשירות לצפות למלכודת ממקור חיצוני לפחות לעיתים קרובות, אחרת כישלון יירשם. זה משמש לשירות בסגנון פעימות לב. <P style=";text-align:right;direction:rtl"><DT> <B>זמן</b> <I>תעלול</i> <DD> אם מתקבלת מלכודת, סטטוס השירות בו נמסרה המלכודת בדרך כלל יישאר קבוע. אם מוגדר <B>trapduration</b> , מצב השירות יישאר במצב כישלון למשך הזמן שצוין על ידי זמן הזמן, ואז הוא יאופס <I>ל&quot;הצלחה</i> &quot;. <P style=";text-align:right;direction:rtl"><DT> <B>זמן</b> <I>קצר</i> <DD> במקום לתזמן את תסריט הצג לרוץ בתחילה כל פרק, אקראי להתאים את המרווח שנקבע ע&quot;י פרמטר <B>המרווח</b> ידי פלוס-או-מינוס <B>randskew.</b> ערך השיפוע מוגדר כפרמטר <B>המרווח</b> : &quot;30s&quot;, &quot;5m&quot; וכו &#39;... לדוגמא, אם <B>המרווח</b> הוא 1m, ו- <B>randskew</b> הוא &quot;5s&quot;, אז <I>שני</i> יקבע את סקריפט המסך זמן מה בין כל 55 שניות ל 65 שניות. הכוונה היא לסייע בהפצת העומס בשרת כאשר שירותים רבים מתוזמנים באותם מרווחים. <P style=";text-align:right;direction:rtl"><DT> <B>צג</b> <I>שם צג [arg ...]</i> <DD> <B>מוניטור</b> מילות המפתח ואחריו שם סקריפט וטיעונים מציין את הצג שמופעל כאשר תפוג הטיימר. מוסכמות ציטוטים דמויי מעטפת, כאשר מפרטים את הטיעונים שיש לשלוח לתסריט המסך. הסקריפט מופעל מהספרייה שניתנה עם ארגומנט ה- <B>s</b> , וכל המילים הבאות מסופקות כארגומנטים לתוכנית המסך, ואחריה רשימת המארחים בקבוצה אליהם מפנה קבוצת הצפייה הנוכחית. אם קו המסך מסתיים ב- &quot;;;&quot; כמילה נפרדת, הקבוצות המארחות אינן מצורפות לרשימת הטיעונים כאשר מופעלת התוכנית. <P style=";text-align:right;direction:rtl"><DT> <B>allow_empty_group</b> <DD> האפשרות <B>allow_empty_group</b> תאפשר להפעיל צג גם כאשר הקבוצה המארחת עבור אותה שעון ריקה בגלל מארחים מושבתים. התנהגות ברירת המחדל היא לא להפעיל את הצג כאשר כל המארחים בקבוצת מארחים הושבתו. <P style=";text-align:right;direction:rtl"><DT> <I>תיאור</i> <B>טקסט</b> <I>תיאור</i> <DD> הטקסט הבא <B>בתיאור</b> נשאל על ידי תוכניות לקוח, מועבר להתראות ולצגים באמצעות משתנה סביבתי. עליו להכיל תיאור קצר של השירות, מתאים לכלול בדוא&quot;ל או בדף אינטרנט. <P style=";text-align:right;direction:rtl"><DT> <B>exclude_hosts</b> <I>מארח [מארח ...]</i> <DD> כל המארחים הרשומים לאחר <B>exclude_hosts</b> לא ייכללו בבדיקת השירות. <P style=";text-align:right;direction:rtl"><DT> <B>אי</b> <I>הכללה של</i> <B>תקופת</b> <I>זמן</i> <DD> אל תריץ צג מתוזמן במהלך הזמן שזוהה על ידי <I>periodspec</i> . <P style=";text-align:right;direction:rtl"><DT> <B>תלוי</b> <I>בדיכאון</i> <B>תלוי</b> <DD> מילת המפתח <B>תלויה</b> משמשת לציון ביטוי תלות, המעריך אם נכון לשקר, במובן הבוליאני. תלויים הם ביטויים של פרל בפועל, ועליהם לציית לכל הכלים התחביריים. הביטויים מוערכים במרחב החבילה שלהם כדי לא לגרום בטעות לתופעות לוואי לא רצויות. אם נמצאה שגיאת תחביר בעת הערכת הביטוי, היא נרשמת באמצעות syslog. <P style=";text-align:right;direction:rtl"> לפני ההערכה, ההחלפות הבאות על הביטוי מתרחשות: ביטויים שנראים כמו &quot;קבוצה: שירות&quot; מוחלפים בערך הסטטוס התפעולי הנוכחי של אותו שירות שצוין. תחליפי סטרטוס אלה מחושבים רקורסיבית, כך שאם שירות A תלוי בשירות B, ושירות B תלוי בשירות C, אז שירות A תלוי בשירות C. סטטוסים תפעוליים מוצלחים (המעריכים ל&quot; 1 &quot;) הם&quot; STAT_OK &quot;,&quot; STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;, ו-&quot; STAT_UNKNOWN &quot;. ניתן להשתמש במילה &quot;SELF&quot; (בכל הכובעים) לקבוצה (למשל &quot;SELF: service&quot;), והיא קיצור של קבוצת השעונים הנוכחית. <P style=";text-align:right;direction:rtl"> ניתן להשתמש בתכונה זו כדי לשלוט על התראות לשירותים התלויים בשירותים אחרים, למשל בדיקת SMTP שתלויה בהישג יד למכשיר. <P style=";text-align:right;direction:rtl"><DT> <B>התנהגות</b> <I>{א | מ}</i> <DD> הערכת גרפי התלות יכולה לשלוט על דיכוי ההתראות או לפקח על הפקודות. <P style=";text-align:right;direction:rtl"> <B>דיכוי התראה</b> . אם אפשרות זו מוגדרת כ- &quot;a&quot;, ביטוי התלות יוערך לאחר צג היציאה מהשירות או לאחר קבלת מלכודת. התראה תישלח רק אם ההערכה תצליח, כלומר אף אחד מהצמתים בגרף התלות לא מצביע על כישלון. <P style=";text-align:right;direction:rtl"> <B>עקוב אחר דיכוי</b> . אם הוא מוגדר כ- &quot;m&quot;, ביטוי התלות יפונה לפני שהמוניטור של השירות עומד לפעול. אם החיסול יצליח, אז המוניטור יופעל. אחרת, הצג לא יופעל ומצב השירות יישאר זהה. <P style=";text-align:right;direction:rtl"></DL><A NAME="lbAO">&nbsp;</A><H3 style=";text-align:right;direction:rtl"> הגדרות תקופה </H3><P style=";text-align:right;direction:rtl"> תקופות משמשות להגדרת התנאים אשר אמורים לאפשר מסירת התראות. <P style=";text-align:right;direction:rtl"><DL COMPACT style=";text-align:right;direction:rtl"><DT> <B>תקופה</b> <I>[תווית:]</i> <DD> תקופה מקבצת אזעקה ומשתנה אחת או יותר ששולטות בתדירות ההתרעה מתרחשת כאשר יש כשל. מילת מפתח <B>התקופה</b> יש שתי צורות. הראשון לוקח ויכוח שהוא מפרט תקופתי מהמודול של פטריק ראיין: תקופת Perl 5. עיין ב&quot;זמן פרלדוק :: תקופה &quot;למידע נוסף. <P style=";text-align:right;direction:rtl"> הטופס השני דורש תווית ולאחריה מפרט תקופתי, כהגדרתו לעיל. התווית היא תג המורכב מתו אלפביתי או תחתון תחתון ואחריו אפס או יותר אלפנומריים או תחתונים תחתונים ומסתיים במעי הגס. טופס זה מאפשר תקופות מרובות עם הגדרת אותה תקופה. שימוש אחד הוא להגדרת תקופה שאין <B>לה</b> פרמטרים <B>משתנים</b> או <B>חלופיים</b> לתקופת זמן מסוימת, ואחרת לאותה תקופה עם קבוצה שונה של התראות אשר מכילה פרמטרים אלה. <P style=";text-align:right;direction:rtl"><DT> <B>זמן</b> <I>אלטרברי</i> <DD> מילת המפתח <B>alertevery</b> (בתוך הגדרת <B>תקופה</b> ) נוקטת באותו סוג של טיעון כמו משתנה <B>ההפוגה</b> , ומגביל את מספר הפעמים שנשלחת התראה כאשר השירות ממשיך להיכשל. לדוגמה, אם המרווח הוא &quot;שעה אחת&quot;, רק ההתראות בסעיף התקופה יופעלו אחת לשעה. אם מילת המפתח <B>alertevery</b> מושמטת בערך של תקופה, תישלח התראה בכל פעם שמתגלה כישלון. כברירת מחדל, אם התפוקה של שני כשלים רצופים משתנה, אזי מרווח ה- alertevery יבוטל. אם המילה &quot;סיכום&quot; היא הטיעון האחרון, אזי יש לקחת בחשבון רק את שורות הפלט של סיכום כאשר משווים בין התפוקה של כשלים רצופים. <P style=";text-align:right;direction:rtl"><DT> <B>alertafter</b> <I>num</i> <DD><P style=";text-align:right;direction:rtl"><DT> <B>זמן</b> <I>אחר</i> <DD> מילת המפתח <B>האחרת</b> (בתוך פרק <B>זמן</b> ) יש שתי צורות: רק עם הארגומנט &quot;num&quot;, או עם הארגומנטים &quot;num timeval&quot;. בטופס הראשון, תוקף התראה רק לאחר כשלים &quot;רצופים&quot; ברציפות. <P style=";text-align:right;direction:rtl"> בצורה השנייה, הטיעונים הם מספר שלם חיובי ואחריו מרווח, כמתואר על ידי משתנה <B>המרווח</b> שלמעלה. אם מוגדרים פרמטרים אלה, ההתראות לאותה תקופה ייקראו רק לאחר שתקלות רבות יתרחשו באותו מרווח. לדוגמה, אם לאחר <B>מכן</b> ניתנים הטיעונים &quot;3 30m&quot;, אזהרה נקרא אם 3 כישלונות מתרחשים תוך 30 דקות. <P style=";text-align:right;direction:rtl"><DT> <B>numalerts</b> <I>num</i> <DD><P style=";text-align:right;direction:rtl"> משתנה זה אומר לשרת לקרוא לא יותר מ התראות <I>num</i> במהלך כישלון. דלפק ההתראה נשמר על תקופה, ומתאפס על כל הצלחה. <P style=";text-align:right;direction:rtl"><DT> <B>comp_alerts</b> <DD><P style=";text-align:right;direction:rtl"> אם צוין אפשרות זו, הרי שביצועים העליונים ייקראו רק אם הוזעקה התראה &quot;למטה&quot; המתאימה. <P style=";text-align:right;direction:rtl"><DT> <B>התראת</b> <I>התראה [arg ...]</i> <DD> תקופה עשויה להכיל התראות מרובות אשר מופעלות לאחר כישלון השירות. התראה מוגדרת עם מילת המפתח <B>התראה</b> , ואחריה פרמטר <B>יציאה</b> אופציונאלי, וטיעונים המתפרשים זהים להגדרת <B>המסך</b> , אך ללא &quot;;;&quot; יוצא מן הכלל. פרמטר <B>היציאה</b> לובש צורה של <B>יציאה = x</b> או <B>יציאה = xy</b> ויש לו השפעה כי ההתראה נקראת רק אם מצב היציאה של סקריפט המסך נופל בטווח של פרמטר <B>היציאה</b> . אם, למשל, קו ההתראה הוא <I>יציאת התראה = 10-20</i> <I>דואר. התראה</i> <I>שגויה,</i> אז <I>ההתראה בדואר</i> תיושם רק עם <I>mis</i> <I>כטיעוניה</i> אם ערך היציאה של תוכנית הצג הוא בין 10 ל 20. תכונה זו מאפשרת לך להפעיל התראות שונות ברמות חומרה שונות (כמו כאשר שטח דיסק פנוי נע בין 8% ל- 3%). <P style=";text-align:right;direction:rtl"> עיין בסעיף <B>תוכניות התראה</b> שלמעלה לרשימה של הפרמטרים ששון יעבור אוטומטית לתוכניות התראה. <P style=";text-align:right;direction:rtl"><DT> <I>התראה</i> <B>עליונה</b> <I>[ארג ...]</i> <DD> <B>מהפך</b> הוא מחמאה של <B>התראה</b> . מהפך נקרא כאשר שירותים מבצעים את המעבר של המדינה מכישלון להצלחה. סקריפט ה- <B>upalert</b> נקרא לספק את אותם פרמטרים כמו סקריפט <B>ההתראה</b> , עם תוספת של פרמטר <B>-u</b> המשמש פשוט כדי לאפשר לסקריפט התראה לדעת שהוא נקרא &quot;upalert&quot;. ניתן לציין מספר העליות מרובות עבור כל הגדרת תקופה. לתשומת לבך, התנהגות ברירת המחדל היא ששדרוג עליון יישלח ללא קשר אם היו נשלחות התראות &quot;למטה&quot; קודמות, מכיוון שביצועים גדולים מופעלים במעבר מצב. הגדר את האפשרות <B>comp_alerts</b> לכל תקופה כדי להתאים רמות למעלה עם התראות &quot;למטה&quot;. <P style=";text-align:right;direction:rtl"><DT> <I>התראה</i> <B>startupalert</b> <I>[arg ...]</i> <DD> <B>מפעיל הפעלה</b> נקרא רק כאשר השרת <B>שני</b> מתחיל לבצע. <P style=";text-align:right;direction:rtl"><DT> <B>זמן</b> <I>אחורה אחר כך</i> <DD> הפרמטר <B>upalertafter</b> מצוין כמחרוזת העוקבת אחר התחביר של פרמטר <B>המרווח</b> (&quot;30s&quot;, &quot;1m&quot; וכו &#39;), ושולט על <B>ההפעלה</b> של <B>upalert</b> . אם שירות חוזר לאחר שנמצא למשך זמן גדול או שווה לערך של אפשרות זו, נקרא <B>upalert</b> . השתמש באפשרות זו כדי למנוע קריאה של עליון בגלל &quot;blips&quot; (הפסקות קצרות). <P style=";text-align:right;direction:rtl">