<header> MON Hjælp til servicedefinitioner </header><p> Dette er andet og sidste trin for MON-konfiguration. <p> Standardværdier vises for de obligatoriske tjenester <marked in RED color> . Se det respektive hjælpeemne herunder for mere hjælp til servicedefinitionerne. <p> For <b>&quot;mail.alert&quot;</b> skal du sikre dig, at sendmail er konfigureret, og <b>&quot;sendmail&quot;</b> deamon startes på værtsmaskinen. <H3> Servicedefinitioner </H3><P><DL COMPACT><DT> <B>tjeneste</b> <I>tjenestenavn</i> <DD> En servicedefinition begynder med, at de søgeordstjeneste <B>,</b> efterfulgt af et ord, der er mærket for denne tjeneste. <P> Komponenterne i en tjeneste er en interval-, monitor- og en eller flere tidsperiode-definitioner som defineret nedenfor. <P> Hvis et servicenavn &quot;standard&quot; er defineret i en overvågningsgruppe kaldet &quot;dafault&quot; (se ovenfor), bruges standard / standarddefinitionen til håndtering af ukendte mon fælder. <P><DT> <B>interval</b> <I>timeval</i> <DD> Nøgleordets <B>interval</b> efterfulgt af en tidsværdi specificerer hyppigheden af, at et skærmscript udløses. Tidsværdier er defineret som &quot;30s&quot;, &quot;5m&quot;, &quot;1h&quot; eller &quot;1d&quot;, hvilket betyder 30 sekunder, 5 minutter, 1 time eller 1 dag. Den numeriske del kan være en brøkdel, såsom &quot;1,5 time&quot; eller en og en halv time. Dette format af en <I>tidsspecifikation</i> vil blive omtalt som <I>tidseval</i> . <P><DT> <B>tid for</b> <I>traptimeout</i> <DD> Dette nøgleord tager samme tidsspecifikationsargument som <B>interval</b> <I>,</i> og får tjenesten til at forvente en fælde fra en ekstern kilde i det mindste ofte, ellers registreres der en fejl. Dette bruges til en service med hjerteslag. <P><DT> <B>trapduration</b> <I>timeval</i> <DD> Hvis der modtages en fælde, forbliver status for den service, som fælden blev leveret til, normalt konstant. Hvis <B>trapduration</b> er specificeret, forbliver tjenestens status i en <I>fiaskustilstand</i> i den varighed, der er specificeret af <I>tidsperioden</i> , og derefter nulstilles den til &quot;succes&quot;. <P><DT> <B>randskew</b> <I>timeval</i> <DD> I stedet for at planlægge monitorskriptet til at køre i starten af hvert interval, skal du tilfældigt justere det interval, der er specificeret af <B>intervalparameteren</b> med plus-eller-minus <B>randskew.</b> Skævværdien er specificeret som <B>intervalparameteren</b> : &quot;30s&quot;, &quot;5m&quot; osv. ... For eksempel hvis <B>intervallet</b> er 1m, og <B>randskew</b> er &quot;5s&quot;, planlægger <I>mon</i> derefter monitorskriptet et stykke tid mellem hvert 55 sekund og 65 sekunder. Hensigten er at hjælpe med at fordele belastningen på serveren, når mange tjenester er planlagt med de samme intervaller. <P><DT> <B>monitor</b> <I>monitor-navn [arg ...]</i> <DD> Nøgleordet <B>skærm</b> efterfulgt af et script navn og argumenter Angiver skærmen til at køre, når timeren udløber. Shell-lignende citatkonventioner følges, når du specificerer de argumenter, der skal sendes til monitorskriptet. Skriptet påberåbes fra det bibliotek, der er givet med <B>-s-</b> argumentet, og alle følgende ord leveres som argumenter til monitorprogrammet, efterfulgt af listen over værter i den gruppe, der er omtalt af den aktuelle overvågningsgruppe. Hvis monitorlinjen slutter med &quot;;;&quot; som et separat ord føjes værtsgrupperne ikke til argumentlisten, når programmet kaldes op. <P><DT> <B>allow_empty_group</b> <DD> Indstillingen <B>allow_empty_group</b> tillader, at en skærm aktiveres, selv når værtsgruppen for dette ur er tom på grund af deaktiverede værter. Standardadfærden er ikke at påkalde skærmen, når alle værter i en værtsgruppe er deaktiveret. <P><DT> <B>beskrivelse</b> <I>beskrivelse tekst</i> <DD> Teksten, der følger, <B>beskrives</b> ved hjælp af klientprogrammer, sendes til advarsler og skærme via en miljøvariabel. Den skal indeholde en kort beskrivelse af tjenesten, der er velegnet til optagelse i en e-mail eller på en webside. <P><DT> <B>ekskluder_hosts</b> <I>vært [vært ...]</i> <DD> Eventuelle værter, der er anført efter <B>exclude_hosts,</b> vil blive ekskluderet fra servicecheck. <P><DT> <B>ekskluder</b> <I>periodeperiode</i> <DD> Kør ikke en planlagt skærm i den periode, der er identificeret med <I>periodspec</i> . <P><DT> <B>afhænger af</b> <I>afhængighed</i> <DD> Det <B>afhængige</b> nøgleord bruges til at specificere et afhængighedsudtryk, der evalueres til enten sandt for usant, i boolsk forstand. Afhængigheder er faktiske Perl-udtryk og skal overholde alle syntaktiske regler. Udtrykkene evalueres i deres eget pakkerum for ikke at have en uønsket bivirkning ved et uheld. Hvis der findes en syntaksfejl ved evaluering af udtrykket, logges det via syslog. <P> Før evaluering forekommer følgende substitutioner på udtrykket: sætninger, der ligner &quot;gruppe: service&quot;, erstattes med værdien af den aktuelle driftsstatus for den specificerede tjeneste. Disse opstatus-substitutioner beregnes rekursivt, så hvis service A afhænger af service B, og service B afhænger af service C, afhænger service A af service C. Vellykkede driftsstatus (som vurderer til &quot;1&quot;) er &quot;STAT_OK&quot;, &quot;STAT_COLDSTART &quot;,&quot; STAT_WARMSTART &quot;og&quot; STAT_UNKNOWN &quot;. Ordet &quot;SELF&quot; (i alle kasketter) kan bruges til gruppen (f.eks. &quot;SELF: service&quot;) og er en forkortelse for den aktuelle uregruppe. <P> Denne funktion kan bruges til at styre alarmer for tjenester, der er afhængige af andre tjenester, f.eks. En SMTP-test, der er afhængig af, at maskinen kan nås til ping. <P><DT> <B>dep_behavior</b> <I>{a | m}</i> <DD> Evalueringen af afhængighedsgrafer kan kontrollere undertrykkelsen af enten alarm eller overvåge påkaldelser. <P> <B>Undertrykkelse af alarm</b> . Hvis denne indstilling er indstillet til &quot;a&quot;, evalueres afhængighedsudtrykket efter monitoren for tjenesteudgangen eller efter modtagelse af en fælde. Der sendes kun en advarsel, hvis evalueringen lykkes, hvilket betyder, at ingen af knudepunkterne i afhængighedsgrafen indikerer fiasko. <P> <B>Overvåg undertrykkelse</b> . Hvis det er indstillet til &quot;m&quot;, vil afhængighedsudtrykket blive undgået, før monitoren for tjenesten er ved at køre. Hvis evakueringen lykkes, køres monitoren. Ellers køres monitoren ikke, og status for tjenesten forbliver den samme. <P></DL><A NAME="lbAO">&nbsp;</A><H3> Periode Definitioner </H3><P> Perioder bruges til at definere betingelserne, der skal give mulighed for at blive leveret. <P><DL COMPACT><DT> <B>periode</b> <I>[label:] periodspec</i> <DD> En periode grupperer en eller flere alarmer og variabler, der kontrollerer, hvor ofte en alarm sker, når der er en fejl. <B>Periode</b> nøgleordet har to former. Den første tager et argument, som er en periodespecifikation fra Patrick Ryan&#39;s Time :: Period Perl 5-modul. Se &quot;perldoc Time :: Period&quot; for mere information. <P> Den anden form kræver en etiket efterfulgt af en periodespecifikation som defineret ovenfor. Etiketten er et mærke, der består af et alfabetisk tegn eller understreg efterfulgt af nul eller flere alfanumeriske eller understregede og slutter med et kolon. Denne form muliggør flere perioder med den samme periodedefinition. Én anvendelse er at have en <B>periodedefinition,</b> der ikke har nogen <B>altertafter</b> eller <B>alertevery-</b> parametre for en bestemt tidsperiode, og en anden for den samme tidsperiode med et andet sæt advarsler, der indeholder disse parametre. <P><DT> <B>alertevery</b> <I>tid</i> <DD> <B>Alertevery-</b> nøgleordet (inden for en <B>periode-</b> definition) tager den samme type argument som <B>intervalvariablen</b> og begrænser antallet af gange en alarm sendes, når tjenesten fortsætter med at mislykkes. For eksempel, hvis intervallet er &quot;1 t&quot;, udløses kun advarslerne i periodesektionen kun en gang hver time. Hvis nøgleordet <B>alertevery</b> udelades i en <B>periodeindgang,</b> sendes en advarsel, hver gang en fejl opdages. Hvis output fra to på hinanden følgende fejl ændres som standard, tilsidesættes alertevery-intervallet som standard. Hvis ordet &quot;resume&quot; er det sidste argument, overvejes kun de sammendragte outputlinjer, når man sammenligner output fra successive fejl. <P><DT> <B>alertafter</b> <I>num</i> <DD><P><DT> <B>alertafter</b> <I>num timeval</i> <DD> Det <B>andet</b> søgeord (inden for et <B>periodesektion</b> ) har to former: kun med argumentet &quot;num&quot; eller med &quot;num timeval&quot; argumenter. I den første form oprettes en alarm først efter &quot;num&quot; sammenhængende fejl. <P> I den anden form er argumenterne et positivt heltal efterfulgt af et interval som beskrevet af <B>intervalvariablen</b> ovenfor. Hvis disse parametre er specificeret, kaldes advarslerne for den periode kun, efter at der opstår mange fejl inden for dette interval. For eksempel, hvis der <B>efterfølgende</b> gives argumenterne &quot;3 30m&quot;, kaldes alarmen, hvis 3 fejl opstår inden for 30 minutter. <P><DT> <B>numalerts</b> <I>num</i> <DD><P> Denne variabel fortæller serveren at ikke ringe til mere end <I>num</i> alarm under en fejl. Alarmtælleren holdes på en periode og nulstilles efter hver succes. <P><DT> <B>comp_alerts</b> <DD><P> Hvis denne indstilling er specificeret, kaldes upalerts kun, hvis der er kaldt en tilsvarende &quot;down&quot; -alarm. <P><DT> <B>alarm</b> <I>alarm [arg ...]</i> <DD> En periode kan indeholde flere alarmer, der udløses ved fejl i tjenesten. En alarm er angivet med <B>advarslen</b> søgeord, efterfulgt af en valgfri <B>exit</b> parmeter, og argumenter, som fortolkes på samme måde som den <B>definition-skærm,</b> men uden &quot;;;&quot; undtagelse. <B>Udgangen</b> parameter tager form af <B>exit = x</b> eller <B>exit = xy</b> og har den virkning, at indberetningen kun kaldes, hvis exit status på skærmen scriptet falder inden for området af <B>exit</b> parameter. Hvis for eksempel <I>alarmlinjen</i> er <I>alarm exit = 10-20 mail.alert mis,</i> bliver <I>mail-alarm</i> kun aktiveret med <I>mis</i> som dens argumenter, hvis monitorprogrammets exit værdi er mellem 10 og 20. Denne funktion giver dig mulighed for at udløse forskellige alarmer på forskellige sværhedsniveauer (som når ledig diskplads går fra 8% til 3%). <P> Se afsnittet <B>ALERT PROGRAMMER</b> ovenfor for at få en liste over prametre, der automatisk overgår til alarmprogrammer. <P><DT> <B>upalert</b> <I>alarm [arg ...]</i> <DD> En <B>upalert</b> er komplimentet med en <B>alarm</b> . En upalert kaldes, når en serviceydelser foretager staten overgangen fra fiasko til succes. Den <B>upalert</b> script kaldet levere de samme parametre som <B>alarm</b> script, med tilføjelse af den <B>-u</b> parameter, som blot bruges til at lade en alarm script ved, at det bliver kaldt som en upalert. Flere upalerts kan specificeres for hver periodedefinition. Bemærk, at standardopførselen er, at en upalert vil blive sendt uanset om der var sendt nogen forudgående &quot;down&quot; -alarmer, da upalerts udløses ved en statusovergang. Angiv indstillingen per periode for <B>comp_alerts</b> til at parre upalerts med &quot;ned&quot; -alarmer. <P><DT> <B>startupalert</b> <I>alarm [arg ...]</i> <DD> En <B>startupalert</b> kaldes kun, når <B>mon-</b> serveren starter udførelsen. <P><DT> <B>upalertafter</b> <I>tidsperioden</i> <DD> Parameteren <B>upalertafter</b> er specificeret som en streng, der følger syntaks for <B>intervalparameteren</b> (&quot;30s&quot;, &quot;1m&quot; osv.) Og styrer udløsningen af en <B>upalert</b> . Hvis en tjeneste kommer op igen efter at have været nede i en tid, der er større end eller lig med værdien af denne indstilling, kaldes en <B>upalert</b> . Brug denne indstilling til at forhindre, at der opkaldes for ophæng på grund af &quot;blips&quot; (korte afbrydelser) <P>